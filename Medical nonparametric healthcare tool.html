<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intermediate Series: Non-parametric Tests in Healthcare & Distribution-Free Medical Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,300;0,400;0,600;0,700;0,900;1,400&family=PT+Serif:ital,wght@0,400;0,700;1,400&family=Source+Code+Pro:wght@400;500;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <style>
        :root {
            --primary-teal: #00ACC1;
            --secondary-red: #DC2626;
            --light-teal: #4DD0E1;
            --pale-teal: #E0F7FA;
            --deep-teal: #00838F;
            --cyan: #00BCD4;
            --aqua: #80DEEA;
            --medical-navy: #283593;
            --clinical-orange: #FF8F00;
            --health-purple: #7B1FA2;
            --silver: #ECEFF1;
            --charcoal: #37474F;
            --slate: #546E7A;
            --cream: #FAFAFA;
            --white: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PT Serif', serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F0FDFF 50%, var(--pale-teal) 100%);
            color: var(--charcoal);
            line-height: 1.8;
            overflow-x: hidden;
            position: relative;
        }

        /* Distribution-Free Analysis Flow Background */
        body::before {
            content: '';
            position: fixed;
            top: -90%;
            left: -90%;
            width: 280%;
            height: 280%;
            background: 
                radial-gradient(ellipse at 30% 20%, rgba(0, 172, 193, 0.06) 0%, transparent 80%),
                radial-gradient(ellipse at 70% 80%, rgba(77, 208, 225, 0.08) 0%, transparent 75%),
                radial-gradient(ellipse at 85% 10%, rgba(40, 53, 147, 0.05) 0%, transparent 70%),
                radial-gradient(ellipse at 10% 95%, rgba(255, 143, 0, 0.04) 0%, transparent 65%);
            animation: distributionFreeFlow 58s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes distributionFreeFlow {
            0%, 100% { 
                transform: rotate(0deg) scale(1) translate(0, 0); 
                opacity: 0.8; 
            }
            25% { 
                transform: rotate(90deg) scale(1.18) translate(40px, -40px); 
                opacity: 1; 
            }
            50% { 
                transform: rotate(180deg) scale(0.82) translate(-32px, 32px); 
                opacity: 0.85; 
            }
            75% { 
                transform: rotate(270deg) scale(1.12) translate(28px, -20px); 
                opacity: 0.95; 
            }
        }

        /* Non-parametric Pattern */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(75deg, 
                    transparent 0px, 
                    rgba(0, 172, 193, 0.028) 1px, 
                    transparent 2px, 
                    transparent 95px),
                repeating-linear-gradient(-15deg, 
                    transparent 0px, 
                    rgba(77, 208, 225, 0.022) 1px, 
                    transparent 2px, 
                    transparent 115px);
            z-index: -1;
            animation: nonparametricGrid 45s linear infinite;
        }

        @keyframes nonparametricGrid {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(95px) translateY(115px); }
        }

        .container {
            max-width: 2000px;
            margin: 40px auto;
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 
                0 0 100px rgba(255, 112, 67, 0.16),
                0 40px 90px rgba(255, 171, 145, 0.14),
                0 30px 50px rgba(40, 53, 147, 0.12);
            border-radius: 55px;
            overflow: hidden;
            backdrop-filter: blur(25px);
            animation: nonparametricEntry 3.6s cubic-bezier(0.23, 1, 0.32, 1);
            border: 1px solid rgba(255, 112, 67, 0.22);
        }

        @keyframes nonparametricEntry {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(90px) rotateX(25deg);
                filter: blur(25px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0) rotateX(0deg);
                filter: blur(0);
            }
        }

        /* Distribution-Free Analysis Header Design */
        .header-section {
            background: linear-gradient(135deg, var(--charcoal) 0%, var(--primary-teal) 35%, var(--deep-teal) 70%, #004D5C 100%);
            color: white;
            padding: 80px 70px;
            position: relative;
            overflow: hidden;
        }

        .header-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(77, 208, 225, 0.20) 6%, 
                transparent 20%, 
                rgba(40, 53, 147, 0.16) 36%, 
                transparent 50%, 
                rgba(255, 143, 0, 0.14) 66%, 
                transparent 80%);
            animation: distributionFreeHeader 21s ease-in-out infinite;
        }

        @keyframes distributionFreeHeader {
            0%, 100% { 
                transform: translateX(-140px) scaleY(1) rotate(0deg); 
                opacity: 0.85; 
            }
            33% { 
                transform: translateX(95px) scaleY(1.45) rotate(2deg); 
                opacity: 1; 
            }
            66% { 
                transform: translateX(-65px) scaleY(0.7) rotate(-1.5deg); 
                opacity: 0.9; 
            }
        }

        .header-title {
            font-family: 'Nunito', sans-serif;
            font-size: 5.5em;
            font-weight: 900;
            margin-bottom: 42px;
            text-shadow: 6px 8px 25px rgba(0,0,0,0.7);
            position: relative;
            z-index: 2;
            background: linear-gradient(135deg, white 0%, var(--aqua) 20%, #87CEEB 50%, white 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleNonparametric 5.8s ease-in-out infinite alternate;
            letter-spacing: -3.8px;
        }

        @keyframes titleNonparametric {
            from { 
                filter: drop-shadow(0 0 28px rgba(77, 208, 225, 0.8)); 
                text-shadow: 0 0 65px rgba(0, 172, 193, 0.6);
            }
            to { 
                filter: drop-shadow(0 0 45px rgba(0, 172, 193, 0.95)); 
                text-shadow: 0 0 80px rgba(0, 131, 143, 0.7);
            }
        }

        .header-subtitle {
            font-size: 2.7em;
            font-weight: 400;
            opacity: 0.95;
            position: relative;
            z-index: 2;
            color: var(--aqua);
            text-shadow: 5px 6px 22px rgba(0,0,0,0.6);
            letter-spacing: 1.8px;
            font-style: italic;
        }

        /* Distribution-Free Analysis Navigation */
        .nav-tabs {
            display: flex;
            background: linear-gradient(90deg, var(--primary-teal) 0%, var(--medical-navy) 12%, var(--clinical-orange) 24%, var(--health-purple) 36%, var(--cyan) 48%, var(--deep-teal) 60%, var(--primary-teal) 72%, var(--deep-teal) 84%, var(--primary-teal) 100%);
            padding: 0;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 8px 0 rgba(255, 171, 145, 0.85);
        }

        .nav-tabs::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 70%;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0.16) 0%, 
                rgba(77, 208, 225, 0.28) 50%, 
                rgba(255,255,255,0.16) 100%);
            transform: translateX(-300%);
            animation: distributionFreeNav 16s ease-in-out infinite;
        }

        @keyframes distributionFreeNav {
            0%, 100% { transform: translateX(-300%); }
            50% { transform: translateX(700%); }
        }

        .tab-button {
            flex: 1;
            padding: 48px 52px;
            background: none;
            border: none;
            color: white;
            font-weight: 500;
            font-size: 1.45em;
            cursor: pointer;
            transition: all 1.0s cubic-bezier(0.4, 0, 0.2, 1);
            border-bottom: 9px solid transparent;
            position: relative;
            z-index: 2;
            letter-spacing: 1.3px;
        }

        .tab-button:hover {
            background: rgba(77, 208, 225, 0.32);
            transform: translateY(-5px);
            box-shadow: 0 18px 45px rgba(0,0,0,0.4);
            color: var(--cream);
        }

        .tab-button.active {
            background: rgba(77, 208, 225, 0.42);
            border-bottom-color: var(--clinical-orange);
            font-weight: 600;
            color: var(--cream);
            box-shadow: inset 0 -9px 0 var(--clinical-teal);
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding: 95px;
            animation: distributionFreeSlide 2.0s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .content-section.active {
            display: block;
        }

        @keyframes distributionFreeSlide {
            from {
                opacity: 0;
                transform: translateY(80px) scale(0.92);
                filter: blur(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        /* Section Titles - RED (Consistency) */
        .section-title {
            font-family: 'Nunito', sans-serif;
            font-size: 5.4em;
            color: var(--secondary-red);
            margin-bottom: 85px;
            text-align: center;
            font-weight: 700;
            position: relative;
            text-shadow: 5px 6px 22px rgba(0,0,0,0.2);
            letter-spacing: -3.2px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -35px;
            left: 50%;
            transform: translateX(-50%);
            width: 320px;
            height: 8px;
            background: linear-gradient(90deg, 
                var(--peach) 0%, 
                var(--medical-navy) 10%, 
                var(--clinical-teal) 20%, 
                var(--health-purple) 30%, 
                var(--salmon) 40%, 
                var(--primary-coral) 50%, 
                var(--light-coral) 60%, 
                var(--deep-coral) 70%, 
                var(--salmon) 80%, 
                var(--peach) 100%);
            border-radius: 7px;
            animation: distributionFreeUnderline 8.5s ease-in-out infinite alternate;
        }

        @keyframes distributionFreeUnderline {
            from { width: 320px; opacity: 0.8; }
            to { width: 480px; opacity: 1; }
        }

        /* Medical Coral/Salmon Boxes - Intermediate Framework */
        .theory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
            gap: 75px;
            margin-bottom: 95px;
        }

        .theory-card {
            background: linear-gradient(135deg, var(--pale-teal) 0%, #F0FDFF 50%, var(--white) 100%);
            padding: 70px;
            border-radius: 42px;
            border: 7px solid var(--light-teal);
            box-shadow: 
                0 35px 95px rgba(0, 172, 193, 0.16),
                0 18px 45px rgba(77, 208, 225, 0.18);
            transition: all 1.1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .theory-card::before {
            content: '';
            position: absolute;
            top: -60px;
            right: -60px;
            width: 220px;
            height: 220px;
            background: radial-gradient(circle, 
                rgba(77, 208, 225, 0.16) 0%, 
                rgba(0, 172, 193, 0.14) 40%, 
                transparent 70%);
            border-radius: 50%;
            animation: cardNonparametric 12s ease-in-out infinite;
        }

        @keyframes cardNonparametric {
            0%, 100% { 
                transform: scale(1) translateX(0) translateY(0) rotate(0deg); 
                opacity: 0.9; 
            }
            25% { 
                transform: scale(1.3) translateX(40px) translateY(-40px) rotate(90deg); 
                opacity: 1; 
            }
            50% { 
                transform: scale(0.7) translateX(-30px) translateY(30px) rotate(180deg); 
                opacity: 0.85; 
            }
            75% { 
                transform: scale(1.25) translateX(30px) translateY(-18px) rotate(270deg); 
                opacity: 0.95; 
            }
        }

        .theory-card:hover {
            transform: translateY(-25px);
            box-shadow: 
                0 45px 130px rgba(0, 172, 193, 0.22),
                0 25px 65px rgba(77, 208, 225, 0.28);
            border-color: var(--primary-teal);
        }

        .theory-card h3 {
            font-family: 'Nunito', sans-serif;
            color: var(--secondary-red);
            margin-bottom: 45px;
            font-size: 2.9em;
            font-weight: 700;
            position: relative;
            z-index: 2;
            letter-spacing: -1.5px;
        }

        .theory-card p {
            font-size: 1.5em;
            line-height: 2.1;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
            font-weight: 400;
        }

        /* Mathematical Formulas - Distribution-Free Style */
        .formula-display {
            background: linear-gradient(135deg, var(--charcoal) 0%, var(--primary-teal) 50%, var(--deep-teal) 100%);
            color: white;
            padding: 60px;
            border-radius: 36px;
            margin: 52px 0;
            font-family: 'Source Code Pro', monospace;
            font-size: 1.55em;
            box-shadow: 
                inset 0 7px 40px rgba(0,0,0,0.75), 
                0 30px 75px rgba(0, 172, 193, 0.45);
            overflow-x: auto;
            border: 7px solid rgba(77, 208, 225, 0.8);
            position: relative;
        }

        .formula-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 7px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                var(--peach) 10%, 
                var(--medical-navy) 20%, 
                var(--clinical-teal) 30%, 
                var(--health-purple) 40%, 
                var(--salmon) 50%, 
                var(--light-coral) 60%, 
                var(--deep-coral) 70%, 
                transparent 100%);
            animation: formulaNonparametric 6.5s ease-in-out infinite;
        }

        @keyframes formulaNonparametric {
            0%, 100% { opacity: 0.7; transform: scaleX(0.6); }
            50% { opacity: 1; transform: scaleX(2.2); }
        }

        /* Medical Coral Control Panel */
        .control-panel {
            background: linear-gradient(135deg, var(--pale-coral) 0%, #FFF8F5 50%, var(--white) 100%);
            padding: 85px;
            border-radius: 50px;
            margin: 85px 0;
            border: 8px solid var(--light-coral);
            box-shadow: 
                0 45px 130px rgba(255, 171, 145, 0.25),
                inset 0 1px 0 rgba(255,255,255,0.99);
            position: relative;
            overflow: hidden;
        }

        .control-panel::before {
            content: '';
            position: absolute;
            top: -150%;
            left: -150%;
            width: 400%;
            height: 400%;
            background: conic-gradient(from 90deg at 50% 50%, 
                transparent 0%, 
                rgba(255, 171, 145, 0.09) 15%, 
                transparent 30%, 
                rgba(255, 112, 67, 0.07) 50%, 
                transparent 65%);
            animation: controlNonparametric 32s linear infinite;
        }

        @keyframes controlNonparametric {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .control-header {
            font-family: 'Nunito', sans-serif;
            color: var(--secondary-red);
            font-size: 4.2em;
            margin-bottom: 65px;
            text-align: center;
            font-weight: 700;
            position: relative;
            z-index: 2;
            letter-spacing: -1.5px;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 55px;
            margin-bottom: 75px;
            position: relative;
            z-index: 2;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--charcoal);
            font-size: 1.45em;
            letter-spacing: 0.7px;
        }

        .form-group select,
        .form-group input {
            padding: 36px;
            border: 2px solid #E5E7EB;
            border-radius: 30px;
            font-size: 1.4em;
            transition: all 0.9s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 10px 30px rgba(0,0,0,0.09);
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: var(--primary-coral);
            box-shadow: 
                0 0 45px rgba(255, 112, 67, 0.45),
                0 0 0 7px rgba(255, 171, 145, 0.25);
            transform: translateY(-5px) scale(1.04);
        }

        /* Distribution-Free Analysis Action Buttons */
        .button-group {
            display: flex;
            gap: 45px;
            margin-top: 75px;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        .btn {
            padding: 40px 85px;
            border: none;
            border-radius: 32px;
            font-weight: 600;
            font-size: 1.5em;
            cursor: pointer;
            transition: all 1.0s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 3.0px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255,255,255,0.9) 50%, 
                transparent 100%);
            transition: left 1.4s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-coral) 0%, var(--deep-coral) 100%);
            color: white;
            box-shadow: 0 18px 55px rgba(255, 112, 67, 0.55);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--deep-coral) 0%, var(--primary-coral) 100%);
            transform: translateY(-12px);
            box-shadow: 0 28px 80px rgba(255, 112, 67, 0.65);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--medical-navy) 0%, #1A237E 100%);
            color: white;
            box-shadow: 0 18px 55px rgba(40, 53, 147, 0.55);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #1A237E 0%, var(--medical-navy) 100%);
            transform: translateY(-12px);
            box-shadow: 0 28px 80px rgba(40, 53, 147, 0.65);
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--clinical-teal) 0%, #004D40 100%);
            color: white;
            box-shadow: 0 18px 55px rgba(0, 121, 107, 0.55);
        }

        .btn-accent:hover {
            background: linear-gradient(135deg, #004D40 0%, var(--clinical-teal) 100%);
            transform: translateY(-12px);
            box-shadow: 0 28px 80px rgba(0, 121, 107, 0.65);
        }

        /* Medical Coral Results Container */
        .results-container {
            background: linear-gradient(135deg, var(--pale-coral) 0%, #FFF8F5 100%);
            border: 8px solid var(--light-coral);
            border-radius: 48px;
            padding: 85px;
            margin: 85px 0;
            box-shadow: 
                0 45px 140px rgba(0,0,0,0.2),
                inset 0 1px 0 rgba(255,255,255,0.99);
            position: relative;
            overflow: hidden;
        }

        .results-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 9px;
            background: linear-gradient(90deg, 
                var(--peach) 0%, 
                var(--medical-navy) 8%, 
                var(--clinical-teal) 16%, 
                var(--health-purple) 24%, 
                var(--salmon) 32%, 
                var(--primary-coral) 40%, 
                var(--light-coral) 48%, 
                var(--deep-coral) 56%, 
                var(--salmon) 64%, 
                var(--clinical-teal) 72%, 
                var(--peach) 100%);
            animation: distributionFreeResults 6.5s ease-in-out infinite;
        }

        @keyframes distributionFreeResults {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .results-header {
            font-family: 'Nunito', sans-serif;
            font-size: 4.5em;
            color: var(--secondary-red);
            margin-bottom: 65px;
            text-align: center;
            font-weight: 700;
            letter-spacing: -1.5px;
        }

        /* Medical Coral Chart Container */
        .chart-container {
            position: relative;
            height: 850px;
            margin: 85px 0;
            background: linear-gradient(135deg, var(--pale-coral) 0%, var(--white) 100%);
            border-radius: 42px;
            padding: 75px;
            box-shadow: 0 35px 100px rgba(0,0,0,0.2);
            border: 7px solid var(--light-coral);
        }

        /* Statistics Grid - Medical Coral Theme */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            gap: 65px;
            margin: 78px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--pale-coral) 0%, var(--white) 100%);
            padding: 55px;
            border-radius: 35px;
            text-align: center;
            border: 7px solid var(--light-coral);
            transition: all 1.0s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 7px;
            background: linear-gradient(90deg, var(--peach) 0%, var(--primary-coral) 50%, var(--medical-navy) 100%);
            transform: scaleX(0);
            transition: transform 0.9s ease;
        }

        .stat-card:hover {
            transform: translateY(-20px) scale(1.06);
            box-shadow: 0 40px 105px rgba(0,0,0,0.25);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-value {
            font-family: 'Source Code Pro', monospace;
            font-size: 3.2em;
            font-weight: 700;
            color: var(--primary-coral);
            margin-bottom: 25px;
        }

        .stat-label {
            font-size: 1.4em;
            color: var(--slate);
            font-weight: 500;
        }

        /* Non-parametric-Specific Elements */
        .nonparametric-info {
            background: linear-gradient(135deg, var(--pale-coral) 0%, #F0F8FF 100%);
            border: 7px solid var(--light-coral);
            border-radius: 32px;
            padding: 55px;
            margin: 55px 0;
        }

        .rank-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(330px, 1fr));
            gap: 35px;
            margin: 45px 0;
        }

        .rank-metric-card {
            background: var(--primary-coral);
            color: white;
            padding: 35px 28px;
            border-radius: 25px;
            text-align: center;
            font-family: 'Source Code Pro', monospace;
            font-size: 1.3em;
            font-weight: 600;
        }

        .rank-metric-card:nth-child(1) { background: var(--medical-navy); }
        .rank-metric-card:nth-child(2) { background: var(--clinical-teal); }
        .rank-metric-card:nth-child(3) { background: var(--primary-coral); }
        .rank-metric-card:nth-child(4) { background: var(--health-purple); }

        /* Decision Framework - Medical Coral */
        .decision-panel {
            background: linear-gradient(135deg, var(--pale-coral) 0%, rgba(255, 171, 145, 0.4) 100%);
            border: 8px solid var(--light-coral);
            border-radius: 45px;
            padding: 75px;
            margin: 75px 0;
        }

        .decision-question {
            font-family: 'Nunito', sans-serif;
            font-weight: 600;
            font-size: 2.1em;
            margin-bottom: 55px;
            color: var(--charcoal);
            text-align: center;
            letter-spacing: -0.7px;
        }

        .decision-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(460px, 1fr));
            gap: 45px;
        }

        .decision-option {
            padding: 45px;
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.9s ease;
            text-align: center;
            font-weight: 500;
            font-size: 1.4em;
        }

        .decision-option:hover {
            border-color: var(--medical-navy);
            background: #E8F5E8;
            transform: translateY(-10px);
        }

        .decision-option.selected {
            border-color: var(--primary-coral);
            background: var(--pale-coral);
            box-shadow: 0 0 60px rgba(255, 112, 67, 0.55);
        }

        /* Feedback Messages */
        .feedback-message {
            padding: 55px;
            border-radius: 35px;
            margin: 55px 0;
            font-weight: 500;
            font-size: 1.5em;
        }

        .feedback-success {
            background: var(--pale-coral);
            border: 7px solid var(--light-coral);
            color: var(--deep-coral);
        }

        .feedback-warning {
            background: #FFF8E1;
            border: 7px solid var(--clinical-teal);
            color: #8F6300;
        }

        .feedback-danger {
            background: #FFEBEE;
            border: 7px solid #DC2626;
            color: #8B0000;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                margin: 35px;
                border-radius: 48px;
            }

            .header-title {
                font-size: 4.5em;
            }

            .theory-grid {
                grid-template-columns: 1fr;
            }

            .control-group {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .button-group {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .rank-metrics {
                grid-template-columns: 1fr;
            }
        }

        /* Research References - Medical Coral */
        .research-note {
            background: linear-gradient(135deg, var(--pale-coral) 0%, #F0F8FF 100%);
            padding: 55px;
            border-radius: 30px;
            margin: 55px 0;
            border-left: 15px solid var(--primary-coral);
            font-style: italic;
            position: relative;
        }

        .research-note::before {
            content: 'üìà';
            position: absolute;
            top: 55px;
            left: 45px;
            font-size: 2.1em;
        }

        .research-note p {
            margin-left: 75px;
            line-height: 2.2;
        }

        /* Advanced Visual Effects */
        .distribution-free-highlight {
            background: rgba(255, 112, 67, 0.18);
            border-left: 12px solid var(--primary-coral);
            padding: 35px;
            margin: 35px 0;
            border-radius: 18px;
        }

        .rank-statistic-display {
            display: inline-block;
            background: linear-gradient(135deg, var(--light-coral) 0%, var(--primary-coral) 100%);
            color: white;
            padding: 18px 35px;
            border-radius: 40px;
            font-family: 'Source Code Pro', monospace;
            font-weight: 700;
            margin: 0 18px;
            font-size: 1.3em;
        }

        /* Canadian Healthcare Context */
        .canada-nonparametric {
            background: linear-gradient(135deg, #FF6B6B 0%, #DC2626 100%);
            color: white;
            padding: 16px 30px;
            border-radius: 30px;
            font-family: 'Source Code Pro', monospace;
            font-weight: 600;
            font-size: 1.0em;
            display: inline-block;
            margin: 0 16px;
        }

        /* Test Selection Visualization */
        .test-selection-info {
            display: flex;
            justify-content: space-between;
            background: var(--pale-coral);
            padding: 40px;
            border-radius: 24px;
            margin: 40px 0;
        }

        .test-selection-metric {
            background: var(--primary-coral);
            color: white;
            padding: 25px 35px;
            border-radius: 18px;
            text-align: center;
            flex: 1;
            margin: 0 16px;
            font-family: 'Source Code Pro', monospace;
            font-weight: 600;
            font-size: 1.2em;
        }

        .test-selection-metric:first-child {
            background: var(--medical-navy);
        }

        .test-selection-metric:nth-child(2) {
            background: var(--clinical-teal);
        }

        .test-selection-metric:last-child {
            background: var(--health-purple);
        }

        /* Non-parametric Steps */
        .nonparametric-steps {
            background: var(--pale-coral);
            padding: 45px;
            border-radius: 28px;
            margin: 45px 0;
            border: 6px solid var(--light-coral);
        }

        .step-item {
            display: flex;
            align-items: center;
            margin: 25px 0;
            padding: 25px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 8px 22px rgba(0,0,0,0.09);
        }

        .step-number {
            background: var(--primary-coral);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 25px;
            font-family: 'Source Code Pro', monospace;
        }

        .step-text {
            font-weight: 500;
            color: var(--charcoal);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header-section">
            <h1 class="header-title">Non-parametric Tests in Healthcare & Distribution-Free Medical Analysis</h1>
            <p class="header-subtitle">Intermediate Series: Robust Statistical Methods for Medical Research</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="tab-button active" onclick="showSection('theory')">üìà Non-parametric Theory</button>
            <button class="tab-button" onclick="showSection('simulation')">üá®üá¶ Distribution-Free Analysis</button>
            <button class="tab-button" onclick="showSection('analysis')">üîç Rank-Based Testing</button>
            <button class="tab-button" onclick="showSection('assessment')">‚úÖ Assessment Mode</button>
        </div>

        <!-- Theory Framework Section -->
        <div id="theory" class="content-section active">
            <h2 class="section-title">Non-parametric Framework for Healthcare</h2>
            
            <div class="theory-grid">
                <div class="theory-card">
                    <h3>üìà Non-parametric vs Parametric Tests</h3>
                    <p><strong>Distribution-Free Analysis:</strong> Non-parametric tests make no assumptions about population distribution shape, providing robust alternatives when normality assumptions are violated in medical data.</p>
                    <div class="formula-display">
                        When to Use Non-parametric Tests:<br><br>
                        ‚Ä¢ Small sample sizes (n < 30)<br>
                        ‚Ä¢ Non-normal distributions<br>
                        ‚Ä¢ Ordinal or ranked data<br>
                        ‚Ä¢ Outliers present<br>
                        ‚Ä¢ Heterogeneous variances<br><br>
                        Advantages:<br>
                        ‚Ä¢ Fewer assumptions<br>
                        ‚Ä¢ Robust to outliers<br>
                        ‚Ä¢ Valid for ordinal data<br><br>
                        Disadvantages:<br>
                        ‚Ä¢ Lower statistical power<br>
                        ‚Ä¢ Less efficient with normal data
                    </div>
                    <p><em>Clinical insight: Non-parametric tests are essential when medical data violates parametric assumptions</em></p>
                </div>

                <div class="theory-card">
                    <h3>üîç Mann-Whitney U Test</h3>
                    <p><strong>Two Independent Groups:</strong> Mann-Whitney U test compares medians of two independent groups using ranks, ideal for comparing treatment outcomes when normality cannot be assumed.</p>
                    <div class="formula-display">
                        Mann-Whitney U Test:<br><br>
                        U‚ÇÅ = R‚ÇÅ - n‚ÇÅ(n‚ÇÅ + 1)/2<br>
                        U‚ÇÇ = R‚ÇÇ - n‚ÇÇ(n‚ÇÇ + 1)/2<br><br>
                        Where:<br>
                        R‚ÇÅ, R‚ÇÇ = sum of ranks for groups 1, 2<br>
                        n‚ÇÅ, n‚ÇÇ = sample sizes<br><br>
                        Test statistic: U = min(U‚ÇÅ, U‚ÇÇ)<br>
                        Effect size: r = |Z|/‚àöN<br><br>
                        H‚ÇÄ: Median‚ÇÅ = Median‚ÇÇ<br>
                        H‚ÇÅ: Median‚ÇÅ ‚â† Median‚ÇÇ
                    </div>
                    <p><strong>Medical Example:</strong> Comparing pain scores (0-10 scale) between two pain management treatments</p>
                </div>

                <div class="theory-card">
                    <h3>‚ÜîÔ∏è Wilcoxon Signed-Rank Test</h3>
                    <p><strong>Paired Comparisons:</strong> Wilcoxon signed-rank test compares paired observations (before/after) using ranks of differences, essential for within-subject medical studies.</p>
                    <div class="formula-display">
                        Wilcoxon Signed-Rank Test:<br><br>
                        1. Calculate differences: d·µ¢ = x‚ÇÇ·µ¢ - x‚ÇÅ·µ¢<br>
                        2. Rank |d·µ¢| (exclude zeros)<br>
                        3. Assign signs to ranks<br>
                        4. Sum positive ranks: T‚Å∫<br>
                        5. Sum negative ranks: T‚Åª<br><br>
                        Test statistic: T = min(T‚Å∫, |T‚Åª|)<br><br>
                        Effect size: r = |Z|/‚àöN<br><br>
                        H‚ÇÄ: Median difference = 0<br>
                        H‚ÇÅ: Median difference ‚â† 0
                    </div>
                    <p><strong>Clinical Application:</strong> Pre/post treatment comparisons when outcome data is skewed or ordinal</p>
                </div>

                <div class="theory-card">
                    <h3>üéØ Kruskal-Wallis Test</h3>
                    <p><strong>Multiple Groups:</strong> Kruskal-Wallis test extends Mann-Whitney to three or more independent groups, providing non-parametric alternative to one-way ANOVA.</p>
                    <div class="formula-display">
                        Kruskal-Wallis Test:<br><br>
                        H = [12/N(N+1)] √ó Œ£[R·µ¢¬≤/n·µ¢] - 3(N+1)<br><br>
                        Where:<br>
                        N = total sample size<br>
                        R·µ¢ = sum of ranks in group i<br>
                        n·µ¢ = sample size in group i<br><br>
                        H ~ œá¬≤(k-1) under H‚ÇÄ<br><br>
                        Effect size: Œ∑¬≤ = (H - k + 1)/(N - k)<br><br>
                        Post-hoc: Dunn's test with correction
                    </div>
                    <p><strong>Medical Use:</strong> Comparing multiple treatment groups when ANOVA assumptions are violated</p>
                </div>

                <div class="theory-card">
                    <h3>üîÑ Friedman Test</h3>
                    <p><strong>Repeated Measures:</strong> Friedman test analyzes repeated measures or matched groups using ranks, providing non-parametric alternative to repeated measures ANOVA.</p>
                    <div class="formula-display">
                        Friedman Test:<br><br>
                        œá·µ£¬≤ = [12/bk(k+1)] √ó Œ£[R‚±º¬≤] - 3b(k+1)<br><br>
                        Where:<br>
                        b = number of blocks (subjects)<br>
                        k = number of treatments<br>
                        R‚±º = sum of ranks for treatment j<br><br>
                        œá·µ£¬≤ ~ œá¬≤(k-1) under H‚ÇÄ<br><br>
                        Effect size: W = œá·µ£¬≤/[b(k-1)]<br><br>
                        Post-hoc: Nemenyi test
                    </div>
                    <p><strong>Clinical Example:</strong> Comparing pain levels across multiple time points in the same patients</p>
                </div>

                <div class="theory-card">
                    <h3>üìä Rank Correlation</h3>
                    <p><strong>Non-parametric Association:</strong> Spearman's rank correlation measures monotonic relationships without normality assumptions, ideal for ordinal medical variables.</p>
                    <div class="formula-display">
                        Spearman's Rank Correlation:<br><br>
                        œÅ‚Çõ = 1 - [6Œ£d¬≤/n(n¬≤-1)]<br><br>
                        Where:<br>
                        d = difference in ranks<br>
                        n = number of paired observations<br><br>
                        Alternative formula:<br>
                        œÅ‚Çõ = Œ£[(R‚Çì - RÃÑ‚Çì)(R·µß - RÃÑ·µß)]/‚àö[Œ£(R‚Çì - RÃÑ‚Çì)¬≤Œ£(R·µß - RÃÑ·µß)¬≤]<br><br>
                        Range: -1 ‚â§ œÅ‚Çõ ‚â§ +1<br>
                        Test: H‚ÇÄ: œÅ‚Çõ = 0
                    </div>
                    <p><strong>Medical Application:</strong> Correlation between ordinal variables (pain scales, quality of life scores)</p>
                </div>
            </div>

            <div class="theory-card" style="grid-column: 1 / -1;">
                <h3>üá®üá¶ Canadian Distribution-Free Medical Analysis Applications</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 60px; margin-top: 50px;">
                    <div>
                        <h4>üè• Clinical Research Applications:</h4>
                        <ul>
                            <li><strong>Hospital Length of Stay:</strong> Skewed distributions requiring robust comparisons</li>
                            <li><strong>Pain Scale Analysis:</strong> Ordinal outcomes in treatment effectiveness studies</li>
                            <li><strong>Quality of Life Assessment:</strong> Non-normal survey data in clinical trials</li>
                            <li><strong>Biomarker Analysis:</strong> Highly skewed laboratory values and distributions</li>
                        </ul>
                    </div>
                    <div>
                        <h4>üìä Healthcare System Analysis:</h4>
                        <ul>
                            <li><strong>Emergency Wait Times:</strong> Non-normal service time distributions</li>
                            <li><strong>Patient Satisfaction:</strong> Ordinal rating scales and ceiling effects</li>
                            <li><strong>Resource Utilization:</strong> Skewed usage patterns across facilities</li>
                            <li><strong>Cost Analysis:</strong> Heavy-tailed cost distributions in healthcare economics</li>
                        </ul>
                    </div>
                </div>

                <div class="nonparametric-steps" style="margin-top: 50px;">
                    <h4 style="color: var(--secondary-red); margin-bottom: 35px; text-align: center;">üìà Non-parametric Test Selection Process</h4>
                    <div class="step-item">
                        <div class="step-number">1</div>
                        <div class="step-text"><strong>Assumption Assessment:</strong> Check normality, sample size, and data type</div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">2</div>
                        <div class="step-text"><strong>Study Design:</strong> Independent/paired groups, number of comparisons</div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">3</div>
                        <div class="step-text"><strong>Test Selection:</strong> Choose appropriate non-parametric test</div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">4</div>
                        <div class="step-text"><strong>Rank Calculation:</strong> Convert data to ranks and handle ties</div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">5</div>
                        <div class="step-text"><strong>Test Statistic:</strong> Calculate rank-based test statistic</div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">6</div>
                        <div class="step-text"><strong>Effect Size:</strong> Determine practical significance magnitude</div>
                    </div>
                    <div class="step-item">
                        <div class="step-number">7</div>
                        <div class="step-text"><strong>Clinical Interpretation:</strong> Translate findings for medical practice</div>
                    </div>
                </div>
            </div>

            <div class="research-note">
                <p><strong>üìà Distribution-Free Analysis Foundation:</strong> Non-parametric tests provide essential robust alternatives when parametric assumptions fail in medical research. Understanding rank-based methods, effect sizes, and test selection criteria is crucial for analyzing real-world healthcare data that often violates normality assumptions. These methods ensure valid statistical inference across diverse medical applications, from ordinal outcome measures to heavily skewed biomarker distributions.</p>
            </div>
        </div>

        <!-- Canadian Distribution-Free Analysis Section -->
        <div id="simulation" class="content-section">
            <h2 class="section-title">Canadian Distribution-Free Analysis Laboratory</h2>

            <div class="control-panel">
                <h3 class="control-header">üìà Non-parametric Test Simulator</h3>
                
                <div class="control-group">
                    <div class="form-group">
                        <label for="nonparametricModel">Canadian Medical Non-parametric Model</label>
                        <select id="nonparametricModel" onchange="updateNonparametricModel()">
                            <option value="hospital_los">Hospital Length of Stay Analysis</option>
                            <option value="pain_scores">Pain Scale Treatment Comparison</option>
                            <option value="quality_life">Quality of Life Assessment</option>
                            <option value="biomarkers">Biomarker Distribution Analysis</option>
                            <option value="wait_times">Emergency Department Wait Times</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="testType">Non-parametric Test Type</label>
                        <select id="testType">
                            <option value="mann_whitney">Mann-Whitney U Test</option>
                            <option value="wilcoxon" selected>Wilcoxon Signed-Rank Test</option>
                            <option value="kruskal_wallis">Kruskal-Wallis Test</option>
                            <option value="friedman">Friedman Test</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="dataDistribution">Data Distribution</label>
                        <select id="dataDistribution">
                            <option value="right_skewed" selected>Right-skewed (medical typical)</option>
                            <option value="left_skewed">Left-skewed</option>
                            <option value="bimodal">Bimodal</option>
                            <option value="uniform">Uniform</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="sampleSizeNonpar">Sample Size per Group</label>
                        <select id="sampleSizeNonpar">
                            <option value="15">15 patients per group</option>
                            <option value="30" selected>30 patients per group</option>
                            <option value="60">60 patients per group</option>
                            <option value="100">100 patients per group</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="effectSizeNonpar">Effect Size (Cohen's d)</label>
                        <input type="range" id="effectSizeNonpar" min="0.0" max="1.2" step="0.2" value="0.5" onchange="updateEffectSizeNonparDisplay()">
                        <span id="effectSizeNonparValue">0.5</span> (medium effect)
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="generateNonparametricData()">üìà Generate Data</button>
                    <button class="btn btn-secondary" onclick="performNonparametricTest()">üîç Run Test</button>
                    <button class="btn btn-accent" onclick="compareParametric()">üìä Compare Methods</button>
                </div>
            </div>

            <!-- Medical Model Description -->
            <div id="nonparametricDescription" class="nonparametric-info">
                <div class="results-header">Current Distribution-Free Analysis Model</div>
                <div id="nonparametricText"></div>
                <div id="rankMetrics" class="rank-metrics"></div>
            </div>

            <!-- Distribution-Free Analysis Chart -->
            <div class="chart-container">
                <canvas id="nonparametricChart"></canvas>
            </div>
        </div>

        <!-- Rank-Based Testing Section -->
        <div id="analysis" class="content-section">
            <h2 class="section-title">Non-parametric Analysis & Results</h2>

            <div id="nonparametricResults" class="results-container">
                <div class="results-header">Non-parametric Test Results</div>
                <div id="nonparametricTable"></div>
            </div>

            <div class="stats-grid" id="nonparametricStats">
                <!-- Dynamic statistics will be populated here -->
            </div>

            <div id="comparisonResults" class="results-container">
                <div class="results-header">üìà Parametric vs Non-parametric Comparison</div>
                <div id="comparisonTable"></div>
            </div>

            <!-- Non-parametric Comparison Chart -->
            <div class="chart-container">
                <h3 style="text-align: center; margin-bottom: 50px; color: var(--secondary-red);">üîç Distribution & Rank Analysis</h3>
                <canvas id="distributionChart"></canvas>
            </div>
        </div>

        <!-- Assessment Mode Section -->
        <div id="assessment" class="content-section">
            <h2 class="section-title">Non-parametric Assessment</h2>

            <div id="assessmentQuestion" class="decision-panel">
                <div class="decision-question">Loading non-parametric assessment...</div>
                <div class="decision-options" id="assessmentOptions">
                    <!-- Dynamic options will be populated -->
                </div>
                <button class="btn btn-primary" onclick="checkAnswer()" style="margin-top: 55px;">Submit Answer</button>
            </div>

            <div id="assessmentFeedback"></div>

            <div class="button-group" style="margin-top: 75px;">
                <button class="btn btn-secondary" onclick="generateNewQuestion()">üìù New Question</button>
                <button class="btn btn-accent" onclick="showExpertSolution()">üéì Show Distribution Analysis</button>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentNonparametricModel = null;
        let currentNonparametricChart = null;
        let distributionChart = null;
        let selectedAnswer = null;
        let currentQuestion = null;

        // Medical Non-parametric Model Definitions
        const nonparametricModels = {
            hospital_los: {
                title: "Hospital Length of Stay Analysis (Post-Surgical)",
                description: "Analysis of hospital length of stay following elective surgery comparing two surgical techniques, where LOS data exhibits right-skewed distribution typical of healthcare utilization measures.",
                outcome: "Length of Stay (days)",
                groups: ["Traditional Technique", "Minimally Invasive Technique"],
                population: "Adult patients undergoing elective general surgery",
                clinical_context: "Surgical technique effectiveness and resource utilization",
                distribution_type: "Right-skewed with outliers (typical medical)",
                expected_effect: "Medium effect (d = 0.5), minimally invasive superior",
                why_nonparametric: "LOS data heavily right-skewed, normality violated",
                clinical_application: "Surgical planning, resource allocation, cost-effectiveness analysis"
            },
            pain_scores: {
                title: "Pain Scale Treatment Comparison (Chronic Pain)",
                description: "Comparison of pain scores (0-10 VAS) between two analgesic treatments in chronic pain patients, using paired before/after design with ordinal outcome measures.",
                outcome: "Pain Score (0-10 VAS)",
                groups: ["Baseline", "Post-treatment"],
                population: "Chronic pain patients in multidisciplinary clinics",
                clinical_context: "Analgesic effectiveness assessment",
                distribution_type: "Ordinal scale with ceiling/floor effects",
                expected_effect: "Large effect (d = 0.8), significant pain reduction",
                why_nonparametric: "Ordinal data, non-normal distribution, ceiling effects",
                clinical_application: "Treatment selection, dose optimization, outcome measurement"
            },
            quality_life: {
                title: "Quality of Life Assessment (Cancer Survivors)",
                description: "Longitudinal quality of life assessment in cancer survivors across three time points using standardized QoL instruments with multiple domains and ordinal responses.",
                outcome: "Quality of Life Score (0-100)",
                groups: ["6 months", "12 months", "24 months post-treatment"],
                population: "Cancer survivors completing primary treatment",
                clinical_context: "Survivorship care and long-term outcomes",
                distribution_type: "Non-normal with multiple domains",
                expected_effect: "Medium effect (d = 0.4), improvement over time",
                why_nonparametric: "Composite scores, non-normal distribution, repeated measures",
                clinical_application: "Survivorship programs, intervention targeting, outcome monitoring"
            },
            biomarkers: {
                title: "Biomarker Distribution Analysis (Inflammatory Markers)",
                description: "Analysis of C-reactive protein levels across patient groups with different inflammatory conditions, exhibiting highly skewed distributions typical of biomarker data.",
                outcome: "C-Reactive Protein (mg/L)",
                groups: ["Control", "Mild Inflammation", "Severe Inflammation"],
                population: "Patients with suspected inflammatory conditions",
                clinical_context: "Diagnostic biomarker evaluation",
                distribution_type: "Highly right-skewed, log-normal distribution",
                expected_effect: "Large effect (d = 1.0), clear group differences",
                why_nonparametric: "Extreme skewness, wide range, multiplicative effects",
                clinical_application: "Diagnostic thresholds, disease monitoring, treatment response"
            },
            wait_times: {
                title: "Emergency Department Wait Times (Triage Analysis)",
                description: "Comparison of emergency department wait times across different triage categories, examining service delivery efficiency with non-normal time-to-service distributions.",
                outcome: "Wait Time (minutes)",
                groups: ["CTAS 3", "CTAS 4", "CTAS 5"],
                population: "Emergency department patients, non-urgent categories",
                clinical_context: "Emergency department efficiency and patient flow",
                distribution_type: "Right-skewed service times",
                expected_effect: "Large effect (d = 0.9), priority-based differences",
                why_nonparametric: "Service time distributions, extreme outliers",
                clinical_application: "Triage optimization, staffing decisions, quality improvement"
            }
        };

        // Assessment Questions (Non-parametric focused)
        const assessmentQuestions = [
            {
                question: "When should you choose Mann-Whitney U test over t-test for comparing two groups?",
                options: [
                    "When you want higher statistical power",
                    "When data is non-normal, small samples, or ordinal",
                    "When groups have equal sample sizes",
                    "When you need to calculate confidence intervals"
                ],
                correct: 1,
                explanation: "Mann-Whitney U test should be chosen when: (1) data violates normality assumptions, (2) sample sizes are small (n<30), (3) data is ordinal, or (4) there are extreme outliers. It's more robust than t-test under these conditions, though it has lower power when parametric assumptions are met."
            },
            {
                question: "In Wilcoxon signed-rank test, what does a significant result indicate?",
                options: [
                    "The means of two groups are significantly different",
                    "The median difference between paired observations is significantly different from zero",
                    "The variances of paired groups are significantly different",
                    "The correlation between paired measurements is significant"
                ],
                correct: 1,
                explanation: "Wilcoxon signed-rank test examines whether the median of paired differences is significantly different from zero. It tests the null hypothesis that the median difference = 0, making it the non-parametric equivalent of the paired t-test for non-normal data."
            },
            {
                question: "What is the main advantage of Kruskal-Wallis test over one-way ANOVA?",
                options: [
                    "Higher statistical power for all data types",
                    "Can handle unequal group sizes better",
                    "Doesn't require normality assumption",
                    "Provides more detailed post-hoc comparisons"
                ],
                correct: 2,
                explanation: "Kruskal-Wallis test doesn't require the normality assumption that one-way ANOVA does. This makes it robust for skewed data, ordinal outcomes, and situations with outliers. However, it has lower power than ANOVA when normality assumptions are met."
            },
            {
                question: "Why might biomarker data (like C-reactive protein) require non-parametric analysis?",
                options: [
                    "Biomarkers are always measured on ordinal scales",
                    "Laboratory equipment introduces too much measurement error",
                    "Biomarker distributions are often highly skewed with extreme outliers",
                    "Sample sizes in biomarker studies are always small"
                ],
                correct: 2,
                explanation: "Biomarker data (like CRP, cytokines, hormones) typically follows log-normal or highly skewed distributions with extreme outliers. Values can span several orders of magnitude, violating normality assumptions required for parametric tests. Non-parametric tests or log-transformation are appropriate."
            },
            {
                question: "What does Spearman's correlation coefficient measure that Pearson's does not?",
                options: [
                    "Only linear relationships between variables",
                    "Monotonic relationships without requiring normality",
                    "The strength of causal relationships",
                    "Relationships between categorical variables only"
                ],
                correct: 1,
                explanation: "Spearman's correlation measures monotonic (consistently increasing or decreasing) relationships using ranks, without requiring normality or linearity. It can detect non-linear monotonic relationships that Pearson's correlation might miss, making it ideal for ordinal data or non-normal continuous variables."
            }
        ];

        // Navigation Functions
        function showSection(sectionName) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(sectionName).classList.add('active');
            event.target.classList.add('active');
        }

        // Non-parametric Model Management
        function updateNonparametricModel() {
            const modelType = document.getElementById('nonparametricModel').value;
            const model = nonparametricModels[modelType];
            
            document.getElementById('nonparametricText').innerHTML = `
                <h3 style="color: var(--secondary-red); margin-bottom: 35px;">${model.title}</h3>
                <p><strong>Research Context:</strong> ${model.description}</p>
                <div class="research-note">
                    <p><strong>üìà Clinical Context:</strong> ${model.clinical_context}</p>
                </div>
                <p><strong>Outcome Variable:</strong> ${model.outcome}</p>
                <p><strong>Group Comparison:</strong> ${model.groups.join(', ')}</p>
                <p><strong>Target Population:</strong> ${model.population}</p>
                <p><strong>Distribution Type:</strong> ${model.distribution_type}</p>
                <p><strong>Expected Effect:</strong> ${model.expected_effect}</p>
                <p><strong>Why Non-parametric:</strong> ${model.why_nonparametric}</p>
                <p><strong>Clinical Application:</strong> ${model.clinical_application}</p>
            `;
            
            updateRankMetrics();
        }

        function updateRankMetrics() {
            const testType = document.getElementById('testType').value;
            const container = document.getElementById('rankMetrics');
            container.innerHTML = '';
            
            let metrics = [];
            switch(testType) {
                case 'mann_whitney': metrics = ['U Statistic', 'p-value', 'Effect Size (r)', 'Median Difference']; break;
                case 'wilcoxon': metrics = ['T Statistic', 'p-value', 'Effect Size (r)', 'Signed Ranks']; break;
                case 'kruskal_wallis': metrics = ['H Statistic', 'p-value', 'Effect Size (Œ∑¬≤)', 'Mean Ranks']; break;
                case 'friedman': metrics = ['œá·µ£¬≤ Statistic', 'p-value', 'Effect Size (W)', 'Rank Sums']; break;
            }
            
            metrics.forEach((metric, index) => {
                const metricDiv = document.createElement('div');
                metricDiv.className = 'rank-metric-card';
                metricDiv.textContent = metric;
                container.appendChild(metricDiv);
            });
        }

        function updateEffectSizeNonparDisplay() {
            const effectSize = document.getElementById('effectSizeNonpar').value;
            const size = effectSize < 0.3 ? 'small' : 
                        effectSize < 0.8 ? 'medium' : 'large';
            document.getElementById('effectSizeNonparValue').textContent = `${effectSize} (${size} effect)`;
        }

        // Non-parametric Data Generation
        function generateNonparametricData() {
            const modelType = document.getElementById('nonparametricModel').value;
            const testType = document.getElementById('testType').value;
            const distribution = document.getElementById('dataDistribution').value;
            const sampleSize = parseInt(document.getElementById('sampleSizeNonpar').value);
            const effectSize = parseFloat(document.getElementById('effectSizeNonpar').value);
            
            const model = nonparametricModels[modelType];
            
            currentNonparametricModel = {
                model: model,
                testType: testType,
                distribution: distribution,
                sampleSize: sampleSize,
                effectSize: effectSize,
                data: []
            };

            // Generate non-normal medical data
            const numGroups = model.groups.length;
            
            for (let group = 0; group < numGroups; group++) {
                for (let patient = 0; patient < sampleSize; patient++) {
                    let value;
                    
                    // Generate different distribution types
                    switch(distribution) {
                        case 'right_skewed':
                            // Use gamma distribution approximation
                            value = generateGamma(2, 1) * (10 + group * effectSize * 5);
                            break;
                        case 'left_skewed':
                            value = 100 - generateGamma(2, 1) * (10 + group * effectSize * 5);
                            break;
                        case 'bimodal':
                            value = Math.random() < 0.5 ? 
                                generateNormal(20 + group * effectSize * 5, 5) :
                                generateNormal(60 + group * effectSize * 5, 5);
                            break;
                        case 'uniform':
                            value = Math.random() * 50 + group * effectSize * 10;
                            break;
                        default:
                            value = generateNormal(50 + group * effectSize * 10, 15);
                    }
                    
                    const patientData = {
                        group: group,
                        groupName: model.groups[group],
                        outcome: Math.max(0, value),
                        rank: 0, // Will be calculated later
                        patientId: `${group}-${patient}`
                    };
                    
                    currentNonparametricModel.data.push(patientData);
                }
            }

            // Calculate ranks for all data
            const sortedData = [...currentNonparametricModel.data].sort((a, b) => a.outcome - b.outcome);
            sortedData.forEach((item, index) => {
                item.rank = index + 1;
            });

            updateNonparametricChart();
        }

        function generateNormal(mean, std) {
            const u1 = Math.random();
            const u2 = Math.random();
            const z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
            return mean + z0 * std;
        }

        function generateGamma(shape, scale) {
            // Simple gamma approximation using Box-Muller
            let sum = 0;
            for (let i = 0; i < Math.floor(shape); i++) {
                sum += -Math.log(Math.random());
            }
            return sum * scale;
        }

        function updateNonparametricChart() {
            if (!currentNonparametricModel) return;
            
            const ctx = document.getElementById('nonparametricChart').getContext('2d');
            
            if (currentNonparametricChart) {
                currentNonparametricChart.destroy();
            }

            // Create grouped data for visualization
            const groupedData = {};
            currentNonparametricModel.data.forEach(d => {
                if (!groupedData[d.groupName]) {
                    groupedData[d.groupName] = [];
                }
                groupedData[d.groupName].push(d.outcome);
            });

            // Create box plot style visualization with individual points
            const datasets = [];
            const labels = Object.keys(groupedData);
            
            // Add individual points with jitter
            Object.keys(groupedData).forEach((groupName, groupIndex) => {
                const groupData = groupedData[groupName];
                const points = groupData.map(value => ({
                    x: groupIndex + (Math.random() - 0.5) * 0.4,
                    y: value
                }));
                
                datasets.push({
                    label: groupName,
                    data: points,
                    backgroundColor: groupIndex === 0 ? 'rgba(255, 112, 67, 0.6)' : 
                                   groupIndex === 1 ? 'rgba(40, 53, 147, 0.6)' : 
                                   'rgba(0, 121, 107, 0.6)',
                    borderColor: groupIndex === 0 ? '#FF7043' : 
                                groupIndex === 1 ? '#283593' : 
                                '#00796B',
                    borderWidth: 1,
                    pointRadius: 4
                });
            });

            currentNonparametricChart = new Chart(ctx, {
                type: 'scatter',
                data: { datasets: datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `${currentNonparametricModel.model.title} - Distribution Analysis`,
                            font: { size: 16, weight: 'bold' }
                        }
                    },
                    scales: {
                        x: { 
                            title: { display: true, text: 'Groups' },
                            ticks: {
                                callback: function(value, index) {
                                    return labels[index] || '';
                                }
                            }
                        },
                        y: { title: { display: true, text: currentNonparametricModel.model.outcome } }
                    }
                }
            });
        }

        // Non-parametric Analysis
        function performNonparametricTest() {
            if (!currentNonparametricModel) {
                alert('Please generate non-parametric data first');
                return;
            }

            const data = currentNonparametricModel.data;
            const testType = currentNonparametricModel.testType;
            
            let testResults;
            switch(testType) {
                case 'mann_whitney':
                    testResults = performMannWhitneyU(data);
                    break;
                case 'wilcoxon':
                    testResults = performWilcoxonSignedRank(data);
                    break;
                case 'kruskal_wallis':
                    testResults = performKruskalWallis(data);
                    break;
                case 'friedman':
                    testResults = performFriedman(data);
                    break;
            }

            displayNonparametricResults(testResults);
        }

        function performMannWhitneyU(data) {
            const group1 = data.filter(d => d.group === 0);
            const group2 = data.filter(d => d.group === 1);
            
            const n1 = group1.length;
            const n2 = group2.length;
            
            // Calculate rank sums
            const allData = [...data].sort((a, b) => a.outcome - b.outcome);
            let R1 = 0, R2 = 0;
            
            allData.forEach((item, index) => {
                const rank = index + 1;
                if (item.group === 0) R1 += rank;
                else R2 += rank;
            });
            
            // Calculate U statistics
            const U1 = R1 - (n1 * (n1 + 1)) / 2;
            const U2 = R2 - (n2 * (n2 + 1)) / 2;
            const U = Math.min(U1, U2);
            
            // Approximate Z-score and p-value
            const meanU = (n1 * n2) / 2;
            const sdU = Math.sqrt((n1 * n2 * (n1 + n2 + 1)) / 12);
            const z = Math.abs(U - meanU) / sdU;
            const pValue = 2 * (1 - normalCDF(z));
            
            // Effect size
            const effectSize = z / Math.sqrt(n1 + n2);
            
            return {
                testName: 'Mann-Whitney U Test',
                testStatistic: U,
                pValue: pValue,
                effectSize: effectSize,
                R1: R1,
                R2: R2,
                n1: n1,
                n2: n2,
                median1: calculateMedian(group1.map(d => d.outcome)),
                median2: calculateMedian(group2.map(d => d.outcome))
            };
        }

        function performWilcoxonSignedRank(data) {
            // Simulate paired data by pairing consecutive observations
            const pairs = [];
            for (let i = 0; i < data.length / 2; i++) {
                pairs.push({
                    before: data[i * 2].outcome,
                    after: data[i * 2 + 1].outcome,
                    difference: data[i * 2 + 1].outcome - data[i * 2].outcome
                });
            }
            
            // Remove zero differences and rank absolute differences
            const nonZeroDiffs = pairs.filter(p => p.difference !== 0);
            const rankedDiffs = nonZeroDiffs.map(p => ({
                ...p,
                absRank: Math.abs(p.difference)
            })).sort((a, b) => a.absRank - b.absRank);
            
            // Assign ranks
            rankedDiffs.forEach((item, index) => {
                item.rank = index + 1;
            });
            
            // Calculate T+ and T-
            let TPlus = 0, TMinus = 0;
            rankedDiffs.forEach(item => {
                if (item.difference > 0) TPlus += item.rank;
                else TMinus += item.rank;
            });
            
            const T = Math.min(TPlus, TMinus);
            const n = nonZeroDiffs.length;
            
            // Approximate p-value
            const meanT = (n * (n + 1)) / 4;
            const sdT = Math.sqrt((n * (n + 1) * (2 * n + 1)) / 24);
            const z = Math.abs(T - meanT) / sdT;
            const pValue = 2 * (1 - normalCDF(z));
            
            const effectSize = z / Math.sqrt(n);
            
            return {
                testName: 'Wilcoxon Signed-Rank Test',
                testStatistic: T,
                pValue: pValue,
                effectSize: effectSize,
                TPlus: TPlus,
                TMinus: TMinus,
                n: n,
                medianDifference: calculateMedian(nonZeroDiffs.map(p => p.difference))
            };
        }

        function performKruskalWallis(data) {
            const groups = {};
            const N = data.length;
            
            // Group data and calculate rank sums
            data.forEach(item => {
                if (!groups[item.group]) {
                    groups[item.group] = [];
                }
                groups[item.group].push(item);
            });
            
            let H = 0;
            const k = Object.keys(groups).length;
            
            Object.values(groups).forEach(group => {
                const Ri = group.reduce((sum, item) => sum + item.rank, 0);
                const ni = group.length;
                H += (Ri * Ri) / ni;
            });
            
            H = (12 / (N * (N + 1))) * H - 3 * (N + 1);
            
            // Approximate p-value using chi-square distribution
            const pValue = 1 - chiSquareCDF(H, k - 1);
            
            // Effect size (eta-squared)
            const etaSquared = (H - k + 1) / (N - k);
            
            return {
                testName: 'Kruskal-Wallis Test',
                testStatistic: H,
                pValue: pValue,
                effectSize: etaSquared,
                df: k - 1,
                groups: Object.keys(groups).length,
                totalN: N
            };
        }

        function performFriedman(data) {
            // Simplified Friedman test simulation
            const k = Math.max(...data.map(d => d.group)) + 1;
            const b = data.length / k;
            
            // Calculate rank sums for each treatment
            const rankSums = new Array(k).fill(0);
            
            for (let block = 0; block < b; block++) {
                const blockData = data.slice(block * k, (block + 1) * k);
                blockData.sort((a, b) => a.outcome - b.outcome);
                blockData.forEach((item, rank) => {
                    rankSums[item.group] += rank + 1;
                });
            }
            
            let chiSquared = 0;
            const meanRank = (k + 1) / 2;
            
            rankSums.forEach(R => {
                chiSquared += Math.pow(R - b * meanRank, 2);
            });
            
            chiSquared = (12 / (b * k * (k + 1))) * chiSquared;
            
            const pValue = 1 - chiSquareCDF(chiSquared, k - 1);
            const effectSize = chiSquared / (b * (k - 1));
            
            return {
                testName: 'Friedman Test',
                testStatistic: chiSquared,
                pValue: pValue,
                effectSize: effectSize,
                df: k - 1,
                blocks: b,
                treatments: k
            };
        }

        function normalCDF(x) {
            // Approximation of normal CDF
            const a = 0.3193815;
            const b = -0.3565638;
            const c = 1.781478;
            const d = -1.821256;
            const e = 1.330274;
            
            const t = 1 / (1 + 0.2316419 * Math.abs(x));
            const phi = 0.39894228 * Math.exp(-0.5 * x * x) * (a * t + b * t * t + c * Math.pow(t, 3) + d * Math.pow(t, 4) + e * Math.pow(t, 5));
            
            return x >= 0 ? 1 - phi : phi;
        }

        function chiSquareCDF(x, df) {
            // Simplified chi-square CDF approximation
            if (x <= 0) return 0;
            if (df === 1) return 2 * normalCDF(Math.sqrt(x)) - 1;
            
            // Wilson-Hilferty approximation
            const h = 2 / (9 * df);
            const z = (Math.pow(x / df, 1/3) - (1 - h)) / Math.sqrt(h);
            return normalCDF(z);
        }

        function calculateMedian(arr) {
            const sorted = [...arr].sort((a, b) => a - b);
            const mid = Math.floor(sorted.length / 2);
            return sorted.length % 2 === 0 ? 
                (sorted[mid - 1] + sorted[mid]) / 2 : 
                sorted[mid];
        }

        function displayNonparametricResults(results) {
            const model = currentNonparametricModel.model;
            const significance = results.pValue < 0.05 ? '‚úÖ Significant' : '‚ùå Not Significant';
            const effectMagnitude = results.effectSize > 0.5 ? 'Large' : 
                                   results.effectSize > 0.3 ? 'Medium' : 'Small';
            
            document.getElementById('nonparametricTable').innerHTML = `
                <h4>üìà Non-parametric Test Results</h4>
                <div style="background: var(--primary-coral); color: white; padding: 20px; border-radius: 15px; margin-bottom: 25px; text-align: center;">
                    <strong>${results.testName.toUpperCase()}</strong><br>
                    Outcome: ${model.outcome}<br>
                    Test Statistic = ${results.testStatistic.toFixed(3)}, p = ${results.pValue < 0.001 ? '<0.001' : results.pValue.toFixed(3)}
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin: 35px 0;">
                    <div style="font-family: 'Source Code Pro', monospace; background: var(--pale-coral); padding: 30px; border-radius: 18px;">
                        <h5>Test Statistics</h5>
                        <p><strong>Test Statistic:</strong> ${results.testStatistic.toFixed(3)}</p>
                        <p><strong>p-value:</strong> ${results.pValue.toFixed(4)}</p>
                        <p><strong>Effect Size:</strong> ${results.effectSize.toFixed(3)} (${effectMagnitude})</p>
                        <p><strong>Sample Size:</strong> ${currentNonparametricModel.data.length}</p>
                    </div>
                    
                    <div style="background: var(--pale-coral); padding: 30px; border-radius: 18px;">
                        <h5>Clinical Interpretation</h5>
                        <p><strong>Result:</strong> ${significance}</p>
                        <p><strong>Effect:</strong> ${effectMagnitude} clinical effect</p>
                        <p><strong>Recommendation:</strong> ${results.pValue < 0.05 ? 'Clinically meaningful difference detected' : 'No significant difference found'}</p>
                        <p><strong>Why Non-parametric:</strong> ${model.why_nonparametric}</p>
                    </div>
                </div>
                
                <div class="distribution-free-highlight">
                    <p><strong>üìà Clinical Non-parametric Interpretation:</strong> 
                    The ${results.testName.toLowerCase()} ${results.pValue < 0.05 ? 'demonstrates significant differences' : 'shows no significant differences'} 
                    between groups (${significance}). The effect size (${results.effectSize.toFixed(3)}) 
                    indicates a ${effectMagnitude.toLowerCase()} clinical effect using distribution-free methods. 
                    This robust analysis is appropriate given the ${model.distribution_type.toLowerCase()}. 
                    <span class="canada-nonparametric">Canadian clinical validation</span> 
                    supports implementation of findings in clinical practice with consideration of effect magnitude.
                    </p>
                </div>
            `;

            // Update non-parametric statistics display
            document.getElementById('nonparametricStats').innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${results.testStatistic.toFixed(3)}</div>
                    <div class="stat-label">Test Statistic</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.pValue < 0.001 ? '<0.001' : results.pValue.toFixed(3)}</div>
                    <div class="stat-label">p-value</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.effectSize.toFixed(3)}</div>
                    <div class="stat-label">Effect Size</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${effectMagnitude}</div>
                    <div class="stat-label">Effect Magnitude</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Robust</div>
                    <div class="stat-label">Analysis Type</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">Distribution-Free</div>
                    <div class="stat-label">Method</div>
                </div>
            `;
        }

        function compareParametric() {
            if (!currentNonparametricModel) {
                alert('Please perform non-parametric test first');
                return;
            }

            generateDistributionChart();
            displayMethodComparison();
        }

        function generateDistributionChart() {
            const ctx = document.getElementById('distributionChart').getContext('2d');
            
            if (distributionChart) {
                distributionChart.destroy();
            }

            // Create histogram of the data to show distribution
            const allValues = currentNonparametricModel.data.map(d => d.outcome);
            const min = Math.min(...allValues);
            const max = Math.max(...allValues);
            const bins = 20;
            const binWidth = (max - min) / bins;
            
            const histogram = new Array(bins).fill(0);
            const labels = [];
            
            for (let i = 0; i < bins; i++) {
                labels.push((min + i * binWidth).toFixed(1));
            }
            
            allValues.forEach(value => {
                const binIndex = Math.min(Math.floor((value - min) / binWidth), bins - 1);
                histogram[binIndex]++;
            });

            distributionChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Frequency',
                        data: histogram,
                        backgroundColor: 'rgba(255, 112, 67, 0.6)',
                        borderColor: '#FF7043',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: `Data Distribution - ${currentNonparametricModel.distribution}`,
                            font: { size: 16, weight: 'bold' }
                        }
                    },
                    scales: {
                        x: { title: { display: true, text: currentNonparametricModel.model.outcome } },
                        y: { title: { display: true, text: 'Frequency' } }
                    }
                }
            });
        }

        function displayMethodComparison() {
            const model = currentNonparametricModel.model;
            
            // Simulate parametric vs non-parametric comparison
            const parametricPower = currentNonparametricModel.distribution === 'right_skewed' ? 0.65 : 0.85;
            const nonparametricPower = 0.80;
            const robustness = currentNonparametricModel.distribution === 'right_skewed' ? 'High' : 'Medium';
            
            document.getElementById('comparisonTable').innerHTML = `
                <h4>üìà Parametric vs Non-parametric Method Comparison</h4>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 45px; margin: 40px 0;">
                    <div class="stat-card" style="padding: 40px;">
                        <h5>Method Characteristics</h5>
                        <div class="test-selection-info">
                            <div class="test-selection-metric">Parametric<br>Assumes Normal</div>
                            <div class="test-selection-metric">Non-parametric<br>Distribution-Free</div>
                            <div class="test-selection-metric">Robustness<br>${robustness}</div>
                        </div>
                        <p><strong>Data Type:</strong> ${model.distribution_type}</p>
                        <p><strong>Recommended:</strong> Non-parametric methods</p>
                        <p><strong>Reason:</strong> ${model.why_nonparametric}</p>
                    </div>
                    
                    <div class="stat-card" style="padding: 40px;">
                        <h5>Statistical Performance</h5>
                        <p><strong>Parametric Power:</strong> ${(parametricPower * 100).toFixed(0)}% (if assumptions met)</p>
                        <p><strong>Non-parametric Power:</strong> ${(nonparametricPower * 100).toFixed(0)}% (robust)</p>
                        <p><strong>Assumption Violations:</strong> ${currentNonparametricModel.distribution === 'right_skewed' ? 'Severe' : 'Moderate'}</p>
                        <p><strong>Clinical Validity:</strong> Non-parametric methods ensure valid inference</p>
                    </div>
                </div>
                
                <div class="distribution-free-highlight">
                    <p><strong>üìà Method Selection Rationale:</strong> 
                    For ${model.title.toLowerCase()}, non-parametric methods are preferred due to ${model.distribution_type.toLowerCase()}. 
                    While parametric tests might have higher power under ideal conditions, the violation of normality assumptions 
                    compromises their validity. Non-parametric tests provide robust, reliable inference for 
                    ${model.clinical_context.toLowerCase()} applications in real-world clinical settings.
                    <span class="canada-nonparametric">Canadian healthcare research</span> 
                    emphasizes methodological robustness over theoretical power for patient care applications.
                    </p>
                </div>
            `;
        }

        // Assessment Functions
        function generateNewQuestion() {
            currentQuestion = assessmentQuestions[Math.floor(Math.random() * assessmentQuestions.length)];
            selectedAnswer = null;
            
            document.querySelector('.decision-question').textContent = currentQuestion.question;
            
            const optionsContainer = document.getElementById('assessmentOptions');
            optionsContainer.innerHTML = '';
            
            currentQuestion.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'decision-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            document.getElementById('assessmentFeedback').innerHTML = '';
        }

        function selectAnswer(answerIndex) {
            selectedAnswer = answerIndex;
            
            document.querySelectorAll('.decision-option').forEach((option, index) => {
                option.classList.toggle('selected', index === answerIndex);
            });
        }

        function checkAnswer() {
            if (selectedAnswer === null) {
                alert('Please select an answer first');
                return;
            }
            
            const isCorrect = selectedAnswer === currentQuestion.correct;
            const feedbackClass = isCorrect ? 'feedback-success' : 'feedback-danger';
            const feedbackTitle = isCorrect ? '‚úì Correct!' : '‚úó Incorrect';
            
            document.getElementById('assessmentFeedback').innerHTML = `
                <div class="${feedbackClass}">
                    <h4>${feedbackTitle}</h4>
                    <p><strong>Explanation:</strong> ${currentQuestion.explanation}</p>
                    <p><strong>Correct Answer:</strong> ${currentQuestion.options[currentQuestion.correct]}</p>
                </div>
            `;
        }

        function showExpertSolution() {
            if (!currentQuestion) {
                generateNewQuestion();
                return;
            }
            
            document.getElementById('assessmentFeedback').innerHTML = `
                <div class="feedback-success">
                    <h4>üìà Advanced Non-parametric Analysis</h4>
                    <p><strong>Correct Answer:</strong> ${currentQuestion.options[currentQuestion.correct]}</p>
                    <p><strong>Non-parametric Insight:</strong> ${currentQuestion.explanation}</p>
                    <p><strong>Clinical Application:</strong> Non-parametric tests provide essential robust alternatives when parametric assumptions fail in medical research. Understanding when and how to apply rank-based methods, interpret effect sizes, and select appropriate tests is crucial for analyzing real-world healthcare data. These distribution-free methods ensure valid statistical inference across diverse medical applications, from highly skewed biomarker data to ordinal patient-reported outcomes.</p>
                </div>
            `;
        }

        // Initialize page
        window.addEventListener('load', function() {
            updateNonparametricModel();
            generateNewQuestion();
        });
    </script>
</body>
</html>
