<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foundation Series: Hypothesis Testing in Medicine & Clinical Research</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;900&family=Open+Sans:wght@300;400;600;700&family=Source+Code+Pro:wght@400;500;700&family=Cormorant+Garamond:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <style>
        :root {
            --primary-green: #228B22;
            --secondary-red: #DC2626;
            --light-green: #9ACD32;
            --pale-green: #F0FFF0;
            --forest-green: #006400;
            --sage-green: #87A96B;
            --mint-green: #98FB98;
            --clinical-blue: #4682B4;
            --medical-orange: #FF8C00;
            --health-purple: #8A2BE2;
            --silver: #C0C0C0;
            --charcoal: #2F4F2F;
            --slate: #708090;
            --cream: #F8FFF8;
            --white: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, #F5FFFA 50%, var(--pale-green) 100%);
            color: var(--charcoal);
            line-height: 1.65;
            overflow-x: hidden;
            position: relative;
        }

        /* Clinical Research Flow Background */
        body::before {
            content: '';
            position: fixed;
            top: -70%;
            left: -70%;
            width: 240%;
            height: 240%;
            background: 
                radial-gradient(ellipse at 25% 25%, rgba(34, 139, 34, 0.05) 0%, transparent 65%),
                radial-gradient(ellipse at 75% 75%, rgba(154, 205, 50, 0.06) 0%, transparent 60%),
                radial-gradient(ellipse at 90% 15%, rgba(70, 130, 180, 0.04) 0%, transparent 55%),
                radial-gradient(ellipse at 15% 85%, rgba(255, 140, 0, 0.035) 0%, transparent 50%);
            animation: clinicalFlow 45s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes clinicalFlow {
            0%, 100% { 
                transform: rotate(0deg) scale(1) translate(0, 0); 
                opacity: 0.7; 
            }
            25% { 
                transform: rotate(90deg) scale(1.12) translate(20px, -20px); 
                opacity: 0.95; 
            }
            50% { 
                transform: rotate(180deg) scale(0.88) translate(-15px, 15px); 
                opacity: 0.8; 
            }
            75% { 
                transform: rotate(270deg) scale(1.05) translate(12px, -8px); 
                opacity: 0.9; 
            }
        }

        /* Hypothesis Testing Pattern */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                repeating-linear-gradient(30deg, 
                    transparent 0px, 
                    rgba(34, 139, 34, 0.02) 1px, 
                    transparent 2px, 
                    transparent 70px),
                repeating-linear-gradient(-60deg, 
                    transparent 0px, 
                    rgba(154, 205, 50, 0.015) 1px, 
                    transparent 2px, 
                    transparent 90px);
            z-index: -1;
            animation: hypothesisGrid 30s linear infinite;
        }

        @keyframes hypothesisGrid {
            0% { transform: translateX(0) translateY(0); }
            100% { transform: translateX(70px) translateY(90px); }
        }

        .container {
            max-width: 1850px;
            margin: 25px auto;
            background: rgba(255, 255, 255, 0.97);
            box-shadow: 
                0 0 85px rgba(34, 139, 34, 0.12),
                0 25px 70px rgba(154, 205, 50, 0.1),
                0 15px 35px rgba(70, 130, 180, 0.08);
            border-radius: 40px;
            overflow: hidden;
            backdrop-filter: blur(18px);
            animation: hypothesisEntry 2.6s cubic-bezier(0.23, 1, 0.32, 1);
            border: 1px solid rgba(34, 139, 34, 0.15);
        }

        @keyframes hypothesisEntry {
            from {
                opacity: 0;
                transform: scale(0.87) translateY(70px) rotateX(18deg);
                filter: blur(18px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0) rotateX(0deg);
                filter: blur(0);
            }
        }

        /* Clinical Research Header Design */
        .header-section {
            background: linear-gradient(135deg, var(--charcoal) 0%, var(--primary-green) 35%, var(--forest-green) 70%, #004000 100%);
            color: white;
            padding: 65px 55px;
            position: relative;
            overflow: hidden;
        }

        .header-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(75deg, 
                transparent 0%, 
                rgba(154, 205, 50, 0.14) 12%, 
                transparent 28%, 
                rgba(70, 130, 180, 0.11) 42%, 
                transparent 58%, 
                rgba(255, 140, 0, 0.09) 72%, 
                transparent 88%);
            animation: clinicalHeader 14s ease-in-out infinite;
        }

        @keyframes clinicalHeader {
            0%, 100% { 
                transform: translateX(-100px) scaleY(1) rotate(0deg); 
                opacity: 0.85; 
            }
            33% { 
                transform: translateX(60px) scaleY(1.15) rotate(1deg); 
                opacity: 1; 
            }
            66% { 
                transform: translateX(-35px) scaleY(0.9) rotate(-0.5deg); 
                opacity: 0.92; 
            }
        }

        .header-title {
            font-family: 'Nunito Sans', sans-serif;
            font-size: 4.4em;
            font-weight: 900;
            margin-bottom: 28px;
            text-shadow: 3px 5px 15px rgba(0,0,0,0.55);
            position: relative;
            z-index: 2;
            background: linear-gradient(135deg, white 0%, var(--mint-green) 35%, #ADFF2F 65%, white 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: titleHypothesis 4.2s ease-in-out infinite alternate;
            letter-spacing: -2.2px;
        }

        @keyframes titleHypothesis {
            from { 
                filter: drop-shadow(0 0 18px rgba(154, 205, 50, 0.65)); 
                text-shadow: 0 0 38px rgba(70, 130, 180, 0.45);
            }
            to { 
                filter: drop-shadow(0 0 28px rgba(34, 139, 34, 0.75)); 
                text-shadow: 0 0 48px rgba(255, 140, 0, 0.55);
            }
        }

        .header-subtitle {
            font-size: 1.85em;
            font-weight: 400;
            opacity: 0.93;
            position: relative;
            z-index: 2;
            color: var(--mint-green);
            text-shadow: 2px 3px 12px rgba(0,0,0,0.45);
            letter-spacing: 1.1px;
            font-style: italic;
        }

        /* Clinical Testing Navigation */
        .nav-tabs {
            display: flex;
            background: linear-gradient(90deg, var(--primary-green) 0%, var(--clinical-blue) 20%, var(--medical-orange) 40%, var(--sage-green) 60%, var(--forest-green) 80%, var(--primary-green) 100%);
            padding: 0;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 5px 0 rgba(154, 205, 50, 0.6);
        }

        .nav-tabs::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 38%;
            background: linear-gradient(90deg, 
                rgba(255,255,255,0.1) 0%, 
                rgba(154, 205, 50, 0.18) 50%, 
                rgba(255,255,255,0.1) 100%);
            transform: translateX(-150%);
            animation: clinicalNav 9.5s ease-in-out infinite;
        }

        @keyframes clinicalNav {
            0%, 100% { transform: translateX(-150%); }
            50% { transform: translateX(400%); }
        }

        .tab-button {
            flex: 1;
            padding: 33px 38px;
            background: none;
            border: none;
            color: white;
            font-weight: 500;
            font-size: 1.16em;
            cursor: pointer;
            transition: all 0.75s cubic-bezier(0.4, 0, 0.2, 1);
            border-bottom: 6px solid transparent;
            position: relative;
            z-index: 2;
            letter-spacing: 0.7px;
        }

        .tab-button:hover {
            background: rgba(154, 205, 50, 0.22);
            transform: translateY(-9px);
            box-shadow: 0 20px 55px rgba(0,0,0,0.32);
            color: var(--cream);
        }

        .tab-button.active {
            background: rgba(154, 205, 50, 0.32);
            border-bottom-color: var(--medical-orange);
            font-weight: 600;
            color: var(--cream);
            box-shadow: inset 0 -6px 0 var(--medical-orange);
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding: 68px;
            animation: clinicalSlide 1.5s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .content-section.active {
            display: block;
        }

        @keyframes clinicalSlide {
            from {
                opacity: 0;
                transform: translateY(55px) scale(0.96);
                filter: blur(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        /* Section Titles - RED (Consistency) */
        .section-title {
            font-family: 'Nunito Sans', sans-serif;
            font-size: 3.7em;
            color: var(--secondary-red);
            margin-bottom: 58px;
            text-align: center;
            font-weight: 700;
            position: relative;
            text-shadow: 2px 3px 12px rgba(0,0,0,0.14);
            letter-spacing: -1.8px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 190px;
            height: 5px;
            background: linear-gradient(90deg, 
                var(--mint-green) 0%, 
                var(--clinical-blue) 16%, 
                var(--medical-orange) 32%, 
                var(--sage-green) 48%, 
                var(--forest-green) 64%, 
                var(--primary-green) 80%, 
                var(--mint-green) 100%);
            border-radius: 4px;
            animation: clinicalUnderline 5.8s ease-in-out infinite alternate;
        }

        @keyframes clinicalUnderline {
            from { width: 190px; opacity: 0.8; }
            to { width: 270px; opacity: 1; }
        }

        /* Medical Green/Sage Boxes - Foundation Framework */
        .theory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(510px, 1fr));
            gap: 48px;
            margin-bottom: 68px;
        }

        .theory-card {
            background: linear-gradient(135deg, var(--pale-green) 0%, #F5FFFA 50%, var(--white) 100%);
            padding: 52px;
            border-radius: 30px;
            border: 4px solid var(--light-green);
            box-shadow: 
                0 20px 58px rgba(34, 139, 34, 0.1),
                0 9px 28px rgba(154, 205, 50, 0.12);
            transition: all 0.85s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .theory-card::before {
            content: '';
            position: absolute;
            top: -45px;
            right: -45px;
            width: 170px;
            height: 170px;
            background: radial-gradient(circle, 
                rgba(154, 205, 50, 0.1) 0%, 
                rgba(34, 139, 34, 0.08) 40%, 
                transparent 70%);
            border-radius: 50%;
            animation: cardHypothesis 9.5s ease-in-out infinite;
        }

        @keyframes cardHypothesis {
            0%, 100% { 
                transform: scale(1) translateX(0) translateY(0) rotate(0deg); 
                opacity: 0.9; 
            }
            25% { 
                transform: scale(1.2) translateX(28px) translateY(-28px) rotate(90deg); 
                opacity: 1; 
            }
            50% { 
                transform: scale(0.82) translateX(-18px) translateY(18px) rotate(180deg); 
                opacity: 0.85; 
            }
            75% { 
                transform: scale(1.12) translateX(18px) translateY(-12px) rotate(270deg); 
                opacity: 0.95; 
            }
        }

        .theory-card:hover {
            transform: translateY(-20px) rotateX(12deg) rotateY(4deg);
            box-shadow: 
                0 32px 85px rgba(34, 139, 34, 0.15),
                0 14px 38px rgba(154, 205, 50, 0.18);
            border-color: var(--primary-green);
        }

        .theory-card h3 {
            font-family: 'Nunito Sans', sans-serif;
            color: var(--secondary-red);
            margin-bottom: 32px;
            font-size: 2.05em;
            font-weight: 700;
            position: relative;
            z-index: 2;
            letter-spacing: -0.7px;
        }

        .theory-card p {
            font-size: 1.22em;
            line-height: 1.88;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
            font-weight: 400;
        }

        /* Mathematical Formulas - Clinical Style */
        .formula-display {
            background: linear-gradient(135deg, var(--charcoal) 0%, var(--primary-green) 50%, var(--forest-green) 100%);
            color: white;
            padding: 42px;
            border-radius: 23px;
            margin: 38px 0;
            font-family: 'Source Code Pro', monospace;
            font-size: 1.28em;
            box-shadow: 
                inset 0 4px 25px rgba(0,0,0,0.55), 
                0 16px 45px rgba(34, 139, 34, 0.3);
            overflow-x: auto;
            border: 4px solid rgba(154, 205, 50, 0.5);
            position: relative;
        }

        .formula-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, 
                transparent 0%, 
                var(--mint-green) 18%, 
                var(--clinical-blue) 34%, 
                var(--medical-orange) 50%, 
                var(--sage-green) 66%, 
                var(--forest-green) 82%, 
                transparent 100%);
            animation: formulaHypothesis 4.8s ease-in-out infinite;
        }

        @keyframes formulaHypothesis {
            0%, 100% { opacity: 0.7; transform: scaleX(0.6); }
            50% { opacity: 1; transform: scaleX(1.45); }
        }

        /* Medical Green Control Panel */
        .control-panel {
            background: linear-gradient(135deg, var(--pale-green) 0%, #F5FFFA 50%, var(--white) 100%);
            padding: 58px;
            border-radius: 34px;
            margin: 58px 0;
            border: 5px solid var(--light-green);
            box-shadow: 
                0 25px 75px rgba(154, 205, 50, 0.18),
                inset 0 1px 0 rgba(255,255,255,0.98);
            position: relative;
            overflow: hidden;
        }

        .control-panel::before {
            content: '';
            position: absolute;
            top: -95%;
            left: -95%;
            width: 290%;
            height: 290%;
            background: conic-gradient(from 60deg at 50% 50%, 
                transparent 0%, 
                rgba(154, 205, 50, 0.05) 22%, 
                transparent 44%, 
                rgba(34, 139, 34, 0.04) 66%, 
                transparent 88%);
            animation: controlHypothesis 23s linear infinite;
        }

        @keyframes controlHypothesis {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .control-header {
            font-family: 'Nunito Sans', sans-serif;
            color: var(--secondary-red);
            font-size: 2.8em;
            margin-bottom: 42px;
            text-align: center;
            font-weight: 700;
            position: relative;
            z-index: 2;
            letter-spacing: -0.7px;
        }

        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(385px, 1fr));
            gap: 40px;
            margin-bottom: 48px;
            position: relative;
            z-index: 2;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 18px;
            color: var(--charcoal);
            font-size: 1.2em;
            letter-spacing: 0.45px;
        }

        .form-group select,
        .form-group input {
            padding: 23px;
            border: 2px solid #E5E7EB;
            border-radius: 16px;
            font-size: 1.14em;
            transition: all 0.65s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.99);
            box-shadow: 0 5px 18px rgba(0,0,0,0.06);
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 
                0 0 35px rgba(34, 139, 34, 0.3),
                0 0 0 4px rgba(154, 205, 50, 0.18);
            transform: translateY(-5px) scale(1.025);
        }

        /* Clinical Action Buttons */
        .button-group {
            display: flex;
            gap: 30px;
            margin-top: 48px;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        .btn {
            padding: 26px 52px;
            border: none;
            border-radius: 18px;
            font-weight: 600;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.75s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 1.8px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(255,255,255,0.65) 50%, 
                transparent 100%);
            transition: left 0.9s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--forest-green) 100%);
            color: white;
            box-shadow: 0 11px 32px rgba(34, 139, 34, 0.42);
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--forest-green) 0%, var(--primary-green) 100%);
            transform: translateY(-9px);
            box-shadow: 0 20px 55px rgba(34, 139, 34, 0.48);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--clinical-blue) 0%, #4169E1 100%);
            color: white;
            box-shadow: 0 11px 32px rgba(70, 130, 180, 0.42);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #4169E1 0%, var(--clinical-blue) 100%);
            transform: translateY(-9px);
            box-shadow: 0 20px 55px rgba(70, 130, 180, 0.48);
        }

        .btn-accent {
            background: linear-gradient(135deg, var(--medical-orange) 0%, #FF7F00 100%);
            color: white;
            box-shadow: 0 11px 32px rgba(255, 140, 0, 0.42);
        }

        .btn-accent:hover {
            background: linear-gradient(135deg, #FF7F00 0%, var(--medical-orange) 100%);
            transform: translateY(-9px);
            box-shadow: 0 20px 55px rgba(255, 140, 0, 0.48);
        }

        /* Medical Green Results Container */
        .results-container {
            background: linear-gradient(135deg, var(--pale-green) 0%, #F5FFFA 100%);
            border: 5px solid var(--light-green);
            border-radius: 32px;
            padding: 58px;
            margin: 58px 0;
            box-shadow: 
                0 28px 85px rgba(0,0,0,0.13),
                inset 0 1px 0 rgba(255,255,255,0.99);
            position: relative;
            overflow: hidden;
        }

        .results-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, 
                var(--mint-green) 0%, 
                var(--clinical-blue) 14%, 
                var(--medical-orange) 28%, 
                var(--sage-green) 42%, 
                var(--forest-green) 56%, 
                var(--primary-green) 70%, 
                var(--light-green) 84%, 
                var(--mint-green) 100%);
            animation: clinicalResults 4.8s ease-in-out infinite;
        }

        @keyframes clinicalResults {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .results-header {
            font-family: 'Nunito Sans', sans-serif;
            font-size: 2.9em;
            color: var(--secondary-red);
            margin-bottom: 42px;
            text-align: center;
            font-weight: 700;
            letter-spacing: -0.7px;
        }

        /* Medical Green Chart Container */
        .chart-container {
            position: relative;
            height: 620px;
            margin: 58px 0;
            background: linear-gradient(135deg, var(--pale-green) 0%, var(--white) 100%);
            border-radius: 26px;
            padding: 48px;
            box-shadow: 0 20px 58px rgba(0,0,0,0.14);
            border: 4px solid var(--light-green);
        }

        /* Statistics Grid - Medical Green Theme */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(310px, 1fr));
            gap: 40px;
            margin: 52px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--pale-green) 0%, var(--white) 100%);
            padding: 40px;
            border-radius: 22px;
            text-align: center;
            border: 4px solid var(--light-green);
            transition: all 0.75s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--mint-green) 0%, var(--primary-green) 50%, var(--clinical-blue) 100%);
            transform: scaleX(0);
            transition: transform 0.65s ease;
        }

        .stat-card:hover {
            transform: translateY(-14px) scale(1.04);
            box-shadow: 0 28px 65px rgba(0,0,0,0.18);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-value {
            font-family: 'Source Code Pro', monospace;
            font-size: 2.15em;
            font-weight: 700;
            color: var(--primary-green);
            margin-bottom: 16px;
        }

        .stat-label {
            font-size: 1.1em;
            color: var(--slate);
            font-weight: 500;
        }

        /* Hypothesis Testing-Specific Elements */
        .hypothesis-info {
            background: linear-gradient(135deg, var(--pale-green) 0%, #F0F8FF 100%);
            border: 4px solid var(--light-green);
            border-radius: 20px;
            padding: 38px;
            margin: 38px 0;
        }

        .test-statistics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 22px;
            margin: 32px 0;
        }

        .test-stat-card {
            background: var(--primary-green);
            color: white;
            padding: 22px 16px;
            border-radius: 14px;
            text-align: center;
            font-family: 'Source Code Pro', monospace;
            font-size: 1em;
            font-weight: 600;
        }

        .test-stat-card:nth-child(1) { background: var(--clinical-blue); }
        .test-stat-card:nth-child(2) { background: var(--medical-orange); }
        .test-stat-card:nth-child(3) { background: var(--primary-green); }
        .test-stat-card:nth-child(4) { background: var(--sage-green); }

        /* Decision Framework - Medical Green */
        .decision-panel {
            background: linear-gradient(135deg, var(--pale-green) 0%, rgba(154, 205, 50, 0.25) 100%);
            border: 5px solid var(--light-green);
            border-radius: 30px;
            padding: 48px;
            margin: 48px 0;
        }

        .decision-question {
            font-family: 'Nunito Sans', sans-serif;
            font-weight: 600;
            font-size: 1.55em;
            margin-bottom: 38px;
            color: var(--charcoal);
            text-align: center;
            letter-spacing: -0.4px;
        }

        .decision-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
        }

        .decision-option {
            padding: 30px;
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 18px;
            cursor: pointer;
            transition: all 0.65s ease;
            text-align: center;
            font-weight: 500;
            font-size: 1.12em;
        }

        .decision-option:hover {
            border-color: var(--clinical-blue);
            background: #F0F8FF;
            transform: translateY(-7px);
        }

        .decision-option.selected {
            border-color: var(--primary-green);
            background: var(--pale-green);
            box-shadow: 0 0 32px rgba(34, 139, 34, 0.4);
        }

        /* Feedback Messages */
        .feedback-message {
            padding: 40px;
            border-radius: 22px;
            margin: 40px 0;
            font-weight: 500;
            font-size: 1.2em;
        }

        .feedback-success {
            background: var(--pale-green);
            border: 4px solid var(--light-green);
            color: var(--forest-green);
        }

        .feedback-warning {
            background: #FFF8E1;
            border: 4px solid var(--medical-orange);
            color: #8F6300;
        }

        .feedback-danger {
            background: #FFEBEE;
            border: 4px solid #DC2626;
            color: #8B0000;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                margin: 22px;
                border-radius: 32px;
            }

            .header-title {
                font-size: 3.2em;
            }

            .theory-grid {
                grid-template-columns: 1fr;
            }

            .control-group {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .button-group {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .test-statistics {
                grid-template-columns: 1fr;
            }
        }

        /* Research References - Medical Green */
        .research-note {
            background: linear-gradient(135deg, var(--pale-green) 0%, #F0F8FF 100%);
            padding: 38px;
            border-radius: 18px;
            margin: 38px 0;
            border-left: 8px solid var(--primary-green);
            font-style: italic;
            position: relative;
        }

        .research-note::before {
            content: 'üß™';
            position: absolute;
            top: 38px;
            left: 32px;
            font-size: 1.5em;
        }

        .research-note p {
            margin-left: 48px;
            line-height: 1.95;
        }

        /* Advanced Visual Effects */
        .clinical-highlight {
            background: rgba(34, 139, 34, 0.12);
            border-left: 7px solid var(--primary-green);
            padding: 22px;
            margin: 22px 0;
            border-radius: 12px;
        }

        .p-value-display {
            display: inline-block;
            background: linear-gradient(135deg, var(--light-green) 0%, var(--primary-green) 100%);
            color: white;
            padding: 12px 22px;
            border-radius: 25px;
            font-family: 'Source Code Pro', monospace;
            font-weight: 700;
            margin: 0 12px;
            font-size: 1.02em;
        }

        /* Canadian Clinical Context */
        .canada-clinical {
            background: linear-gradient(135deg, #FF6B6B 0%, #DC2626 100%);
            color: white;
            padding: 10px 18px;
            border-radius: 18px;
            font-family: 'Source Code Pro', monospace;
            font-weight: 600;
            font-size: 0.88em;
            display: inline-block;
            margin: 0 10px;
        }

        /* Error Type Visualization */
        .error-types {
            display: flex;
            justify-content: space-between;
            background: var(--pale-green);
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .error-type {
            background: var(--medical-orange);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            text-align: center;
            flex: 1;
            margin: 0 10px;
            font-family: 'Source Code Pro', monospace;
            font-weight: 600;
            font-size: 0.95em;
        }

        .error-type:first-child {
            background: var(--clinical-blue);
        }

        .error-type:last-child {
            background: var(--sage-green);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <div class="header-section">
            <h1 class="header-title">Hypothesis Testing in Medicine & Clinical Research</h1>
            <p class="header-subtitle">Foundation Series: Statistical Inference for Healthcare Evidence</p>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="tab-button active" onclick="showSection('theory')">üß™ Hypothesis Testing Theory</button>
            <button class="tab-button" onclick="showSection('simulation')">üá®üá¶ Clinical Applications</button>
            <button class="tab-button" onclick="showSection('analysis')">üìä Statistical Testing</button>
            <button class="tab-button" onclick="showSection('assessment')">‚úÖ Assessment Mode</button>
        </div>

        <!-- Theory Framework Section -->
        <div id="theory" class="content-section active">
            <h2 class="section-title">Medical Hypothesis Testing Framework</h2>
            
            <div class="theory-grid">
                <div class="theory-card">
                    <h3>üß™ Clinical Hypothesis Structure</h3>
                    <p><strong>Scientific Method in Medicine:</strong> Medical hypothesis testing provides the statistical foundation for evidence-based clinical decision-making and research interpretation.</p>
                    <div class="formula-display">
                        Null Hypothesis (H‚ÇÄ): No treatment effect<br>
                        Alternative Hypothesis (H‚ÇÅ): Treatment effect exists<br><br>
                        Clinical Example:<br>
                        H‚ÇÄ: Œº_treatment = Œº_control (no difference)<br>
                        H‚ÇÅ: Œº_treatment ‚â† Œº_control (difference exists)
                    </div>
                    <p><em>Medical insight: Proper hypothesis formation determines appropriate statistical test selection</em></p>
                </div>

                <div class="theory-card">
                    <h3>üìä P-Values in Medical Context</h3>
                    <p><strong>Evidence Interpretation:</strong> P-values quantify evidence against the null hypothesis but require careful interpretation in clinical contexts where patient safety is paramount.</p>
                    <div class="formula-display">
                        p-value = P(observing data | H‚ÇÄ is true)<br><br>
                        Interpretation:<br>
                        p < 0.05: Strong evidence against H‚ÇÄ<br>
                        p < 0.01: Very strong evidence against H‚ÇÄ<br>
                        p < 0.001: Extremely strong evidence against H‚ÇÄ
                    </div>
                    <p><strong>Clinical Caveat:</strong> Statistical significance ‚â† clinical significance; effect size and clinical relevance must also be considered</p>
                </div>

                <div class="theory-card">
                    <h3>‚ö†Ô∏è Type I & II Errors in Healthcare</h3>
                    <p><strong>Clinical Decision Errors:</strong> Understanding error types is critical in medical research where incorrect conclusions can impact patient care and public health policy.</p>
                    <div class="formula-display">
                        Type I Error (Œ±): False positive<br>
                        - Conclude treatment works when it doesn't<br>
                        - Risk: Ineffective treatment adoption<br><br>
                        Type II Error (Œ≤): False negative<br>
                        - Conclude treatment doesn't work when it does<br>
                        - Risk: Missing beneficial treatments
                    </div>
                    <p><strong>Medical Implications:</strong> Balance Œ± and Œ≤ based on clinical consequences and patient safety considerations</p>
                </div>

                <div class="theory-card">
                    <h3>üî¨ T-Tests for Clinical Trials</h3>
                    <p><strong>Treatment Comparisons:</strong> T-tests form the foundation for comparing medical treatments and interventions in controlled clinical settings.</p>
                    <div class="formula-display">
                        One-sample t-test: t = (xÃÑ - Œº‚ÇÄ)/(s/‚àön)<br>
                        Two-sample t-test: t = (xÃÑ‚ÇÅ - xÃÑ‚ÇÇ)/‚àö(s¬≤(1/n‚ÇÅ + 1/n‚ÇÇ))<br>
                        Paired t-test: t = dÃÑ/(s_d/‚àön)<br><br>
                        df = n-1 (one-sample), n‚ÇÅ+n‚ÇÇ-2 (two-sample)
                    </div>
                    <p><strong>Clinical Applications:</strong> Before/after treatment comparisons, drug efficacy trials, biomarker analysis</p>
                </div>

                <div class="theory-card">
                    <h3>üìã Chi-Square Tests for Medical Data</h3>
                    <p><strong>Categorical Analysis:</strong> Chi-square tests evaluate associations between categorical variables common in medical research such as disease status and risk factors.</p>
                    <div class="formula-display">
                        Pearson œá¬≤: œá¬≤ = Œ£(O - E)¬≤/E<br>
                        Fisher's Exact Test: For small samples<br>
                        McNemar's Test: For paired data<br><br>
                        df = (rows - 1) √ó (columns - 1)
                    </div>
                    <p><strong>Medical Uses:</strong> Disease-exposure associations, treatment response rates, diagnostic test performance</p>
                </div>

                <div class="theory-card">
                    <h3>üéØ Power Analysis & Sample Size</h3>
                    <p><strong>Study Design:</strong> Proper power analysis ensures clinical studies have adequate sample sizes to detect clinically meaningful treatment effects while maintaining feasibility.</p>
                    <div class="formula-display">
                        Power = 1 - Œ≤ (probability of detecting true effect)<br>
                        n = 2œÉ¬≤(z_{Œ±/2} + z_Œ≤)¬≤/Œ¥¬≤<br><br>
                        Where Œ¥ = effect size, œÉ = standard deviation<br>
                        Typical: Œ± = 0.05, Power = 0.80 (80%)
                    </div>
                    <p><strong>Clinical Planning:</strong> Balances statistical requirements with practical constraints like recruitment, cost, and ethical considerations</p>
                </div>
            </div>

            <div class="theory-card" style="grid-column: 1 / -1;">
                <h3>üá®üá¶ Canadian Clinical Research Applications</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 45px; margin-top: 35px;">
                    <div>
                        <h4>üè• Clinical Trials & Treatment Studies:</h4>
                        <ul>
                            <li><strong>Drug Efficacy Trials:</strong> Comparing new treatments to standard care</li>
                            <li><strong>Surgical Outcomes:</strong> Before/after intervention analysis</li>
                            <li><strong>Diagnostic Accuracy:</strong> Sensitivity and specificity testing</li>
                            <li><strong>Biomarker Validation:</strong> Laboratory test performance evaluation</li>
                        </ul>
                    </div>
                    <div>
                        <h4>üìä Public Health & Epidemiological Studies:</h4>
                        <ul>
                            <li><strong>Vaccine Effectiveness:</strong> Population-based immunization studies</li>
                            <li><strong>Risk Factor Analysis:</strong> Disease-exposure associations</li>
                            <li><strong>Screening Programs:</strong> Population health intervention evaluation</li>
                            <li><strong>Health Policy Evaluation:</strong> Before/after policy implementation analysis</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="research-note">
                <p><strong>üß™ Evidence-Based Medicine Foundation:</strong> Hypothesis testing provides the statistical foundation for evidence-based medicine by establishing systematic methods for evaluating clinical evidence. These tools enable healthcare professionals to distinguish between chance findings and genuine treatment effects, supporting informed clinical decision-making and advancing medical knowledge through rigorous scientific inquiry.</p>
            </div>
        </div>

        <!-- Canadian Clinical Applications Section -->
        <div id="simulation" class="content-section">
            <h2 class="section-title">Canadian Clinical Research Laboratory</h2>

            <div class="control-panel">
                <h3 class="control-header">üß™ Hypothesis Testing Simulator</h3>
                
                <div class="control-group">
                    <div class="form-group">
                        <label for="clinicalStudy">Canadian Clinical Study</label>
                        <select id="clinicalStudy" onchange="updateClinicalStudy()">
                            <option value="drug_trial">New Drug Efficacy Trial</option>
                            <option value="vaccine_study">Vaccine Effectiveness Study</option>
                            <option value="surgical_outcome">Surgical Intervention Analysis</option>
                            <option value="diagnostic_test">Diagnostic Test Validation</option>
                            <option value="public_health">Public Health Intervention</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="testType">Statistical Test</label>
                        <select id="testType">
                            <option value="one_sample_t">One-Sample T-Test</option>
                            <option value="two_sample_t" selected>Two-Sample T-Test</option>
                            <option value="paired_t">Paired T-Test</option>
                            <option value="chi_square">Chi-Square Test</option>
                            <option value="fisher_exact">Fisher's Exact Test</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="sampleSizeClinical">Sample Size per Group</label>
                        <select id="sampleSizeClinical">
                            <option value="50">50 participants</option>
                            <option value="100" selected>100 participants</option>
                            <option value="200">200 participants</option>
                            <option value="500">500 participants</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="effectSizeLevel">Effect Size (Clinical Importance)</label>
                        <input type="range" id="effectSizeLevel" min="0.1" max="1.5" step="0.1" value="0.5" onchange="updateEffectDisplay()">
                        <span id="effectSizeValue">0.5</span> (Cohen's d)
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" onclick="generateClinicalData()">üß™ Generate Study Data</button>
                    <button class="btn btn-secondary" onclick="performHypothesisTest()">üìä Test Hypothesis</button>
                    <button class="btn btn-accent" onclick="interpretResults()">üìà Clinical Interpretation</button>
                </div>
            </div>

            <!-- Clinical Study Description -->
            <div id="clinicalDescription" class="hypothesis-info">
                <div class="results-header">Current Clinical Research Study</div>
                <div id="clinicalText"></div>
                <div id="testStatistics" class="test-statistics"></div>
            </div>

            <!-- Clinical Data Chart -->
            <div class="chart-container">
                <canvas id="clinicalChart"></canvas>
            </div>
        </div>

        <!-- Statistical Testing Section -->
        <div id="analysis" class="content-section">
            <h2 class="section-title">Hypothesis Testing Results</h2>

            <div id="testResults" class="results-container">
                <div class="results-header">Statistical Test Results</div>
                <div id="testTable"></div>
            </div>

            <div class="stats-grid" id="clinicalStats">
                <!-- Dynamic statistics will be populated here -->
            </div>

            <div id="interpretationResults" class="results-container">
                <div class="results-header">üß™ Clinical Interpretation & Evidence Assessment</div>
                <div id="interpretationTable"></div>
            </div>

            <!-- Power Analysis Chart -->
            <div class="chart-container">
                <h3 style="text-align: center; margin-bottom: 35px; color: var(--secondary-red);">üìä Statistical Power & Effect Size Analysis</h3>
                <canvas id="powerChart"></canvas>
            </div>
        </div>

        <!-- Assessment Mode Section -->
        <div id="assessment" class="content-section">
            <h2 class="section-title">Hypothesis Testing Assessment</h2>

            <div id="assessmentQuestion" class="decision-panel">
                <div class="decision-question">Loading hypothesis testing assessment...</div>
                <div class="decision-options" id="assessmentOptions">
                    <!-- Dynamic options will be populated -->
                </div>
                <button class="btn btn-primary" onclick="checkAnswer()" style="margin-top: 40px;">Submit Answer</button>
            </div>

            <div id="assessmentFeedback"></div>

            <div class="button-group" style="margin-top: 50px;">
                <button class="btn btn-secondary" onclick="generateNewQuestion()">üìù New Question</button>
                <button class="btn btn-accent" onclick="showExpertSolution()">üéì Show Clinical Analysis</button>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentClinicalData = null;
        let currentClinicalChart = null;
        let powerChart = null;
        let selectedAnswer = null;
        let currentQuestion = null;

        // Clinical Study Definitions
        const clinicalStudies = {
            drug_trial: {
                title: "New Drug Efficacy Trial (Health Canada Approved)",
                description: "Randomized controlled trial comparing new cardiovascular medication to standard treatment in Canadian patients with hypertension.",
                primary_outcome: "Systolic Blood Pressure Reduction (mmHg)",
                study_design: "Double-blind, placebo-controlled RCT",
                population: "Adults with essential hypertension (140-180 mmHg)",
                sample_calculation: "80% power to detect 5 mmHg difference, Œ±=0.05",
                regulatory_context: "Phase III trial for Health Canada submission",
                statistical_plan: "Primary analysis using two-sample t-test, ITT population",
                safety_monitoring: "DSMB review for efficacy and safety endpoints",
                clinical_significance: "MCID = 3 mmHg reduction for clinical benefit"
            },
            vaccine_study: {
                title: "COVID-19 Vaccine Effectiveness Study (PHAC)",
                description: "Population-based cohort study evaluating vaccine effectiveness against hospitalization in Canadian adults during Delta variant circulation.",
                primary_outcome: "Hospitalization Rate (per 100,000 person-days)",
                study_design: "Retrospective cohort study",
                population: "Adults ‚â•18 years, provincial health administrative data",
                sample_calculation: "Sufficient power with population-based sampling",
                regulatory_context: "Real-world effectiveness surveillance for PHAC",
                statistical_plan: "Rate ratios using Poisson regression, adjusted for confounders",
                safety_monitoring: "Passive surveillance through CAEFISS",
                clinical_significance: "VE ‚â•50% considered effective by WHO standards"
            },
            surgical_outcome: {
                title: "Minimally Invasive Surgery Outcomes (CIHI Analysis)",
                description: "Before-after study comparing surgical outcomes following implementation of robotic-assisted procedures in Canadian hospitals.",
                primary_outcome: "Length of Stay (days)",
                study_design: "Before-after intervention study",
                population: "Patients undergoing elective procedures at participating hospitals",
                sample_calculation: "Power to detect 1-day reduction in LOS",
                regulatory_context: "Health technology assessment for provincial coverage",
                statistical_plan: "Paired t-test for before/after comparison",
                safety_monitoring: "Adverse event monitoring through hospital reports",
                clinical_significance: "1-day LOS reduction = significant resource savings"
            },
            diagnostic_test: {
                title: "Rapid Diagnostic Test Validation (Laboratory Medicine)",
                description: "Validation study of point-of-care diagnostic test compared to gold standard laboratory method in Canadian clinical settings.",
                primary_outcome: "Diagnostic Accuracy (Sensitivity/Specificity)",
                study_design: "Diagnostic accuracy study",
                population: "Patients presenting with target condition symptoms",
                sample_calculation: "95% CI width ¬±5% for sensitivity/specificity",
                regulatory_context: "Health Canada medical device approval",
                statistical_plan: "McNemar's test for paired proportions, ROC analysis",
                safety_monitoring: "False positive/negative rate monitoring",
                clinical_significance: "Sensitivity ‚â•90%, Specificity ‚â•95% for clinical use"
            },
            public_health: {
                title: "Tobacco Control Policy Evaluation (Provincial Health)",
                description: "Population-level analysis of smoking cessation rates before and after implementation of plain packaging legislation in Canadian provinces.",
                primary_outcome: "Smoking Cessation Rate (%)",
                study_design: "Interrupted time series with control provinces",
                population: "Adult smokers aged 18+ years",
                sample_calculation: "Population-level surveillance data",
                regulatory_context: "Policy evaluation for federal tobacco control strategy",
                statistical_plan: "Chi-square test for proportion differences",
                safety_monitoring: "Unintended consequences monitoring",
                clinical_significance: "5% relative increase in cessation rate = public health impact"
            }
        };

        // Assessment Questions (Hypothesis Testing focused)
        const assessmentQuestions = [
            {
                question: "In a clinical trial with p = 0.04, what is the correct interpretation in medical context?",
                options: [
                    "There is a 4% chance the treatment doesn't work",
                    "There is a 4% probability of observing this result if no treatment effect exists",
                    "The treatment has a 96% chance of being effective",
                    "The treatment effect is clinically significant"
                ],
                correct: 1,
                explanation: "P-values represent the probability of observing the data (or more extreme) assuming the null hypothesis is true. A p = 0.04 means there's a 4% chance of seeing this result if there truly is no treatment effect."
            },
            {
                question: "A Type II error in a cancer treatment study would mean:",
                options: [
                    "Concluding a treatment works when it actually doesn't",
                    "Concluding a treatment doesn't work when it actually does", 
                    "The sample size was too small",
                    "The p-value was greater than 0.05"
                ],
                correct: 1,
                explanation: "Type II error (Œ≤) occurs when we fail to reject a false null hypothesis - concluding no treatment effect when one actually exists. In cancer treatment, this means missing a beneficial therapy."
            },
            {
                question: "When would you use a paired t-test instead of a two-sample t-test in medical research?",
                options: [
                    "When comparing two different patient groups",
                    "When the data is normally distributed",
                    "When measuring the same patients before and after treatment",
                    "When the sample sizes are equal"
                ],
                correct: 2,
                explanation: "Paired t-tests are used when observations are naturally paired, such as measuring the same patients before and after treatment. This controls for individual patient variability and increases statistical power."
            },
            {
                question: "In a diagnostic test validation study, which statistical test is most appropriate for comparing sensitivity between two tests?",
                options: [
                    "Chi-square test",
                    "McNemar's test",
                    "Fisher's exact test",
                    "Two-sample t-test"
                ],
                correct: 1,
                explanation: "McNemar's test is specifically designed for comparing paired proportions, such as comparing the sensitivity of two diagnostic tests applied to the same patients. It accounts for the paired nature of the data."
            },
            {
                question: "A study reports 'statistically significant but not clinically significant' results. This means:",
                options: [
                    "The statistical test was performed incorrectly",
                    "The effect size is large but the p-value is high",
                    "The p-value is low but the effect size is too small to matter clinically",
                    "The study needs a larger sample size"
                ],
                correct: 2,
                explanation: "This occurs when a study has sufficient power to detect a small effect (low p-value) but the magnitude of the effect is below the minimal clinically important difference (MCID). Statistical significance doesn't guarantee clinical relevance."
            }
        ];

        // Navigation Functions
        function showSection(sectionName) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-button').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(sectionName).classList.add('active');
            event.target.classList.add('active');
        }

        // Clinical Study Management
        function updateClinicalStudy() {
            const studyType = document.getElementById('clinicalStudy').value;
            const study = clinicalStudies[studyType];
            
            document.getElementById('clinicalText').innerHTML = `
                <h3 style="color: var(--secondary-red); margin-bottom: 22px;">${study.title}</h3>
                <p><strong>Research Context:</strong> ${study.description}</p>
                <div class="research-note">
                    <p><strong>üß™ Regulatory Context:</strong> ${study.regulatory_context}</p>
                </div>
                <p><strong>Primary Outcome:</strong> ${study.primary_outcome}</p>
                <p><strong>Study Design:</strong> ${study.study_design}</p>
                <p><strong>Target Population:</strong> ${study.population}</p>
                <p><strong>Sample Size Rationale:</strong> ${study.sample_calculation}</p>
                <p><strong>Statistical Analysis Plan:</strong> ${study.statistical_plan}</p>
                <p><strong>Safety Monitoring:</strong> ${study.safety_monitoring}</p>
                <p><strong>Clinical Significance Threshold:</strong> ${study.clinical_significance}</p>
            `;
            
            updateTestStatistics();
        }

        function updateTestStatistics() {
            const testType = document.getElementById('testType').value;
            const container = document.getElementById('testStatistics');
            container.innerHTML = '';
            
            let statistics = [];
            switch(testType) {
                case 'one_sample_t': statistics = ['H‚ÇÄ: Œº = Œº‚ÇÄ', 'H‚ÇÅ: Œº ‚â† Œº‚ÇÄ', 't = (xÃÑ-Œº‚ÇÄ)/SE', 'df = n-1']; break;
                case 'two_sample_t': statistics = ['H‚ÇÄ: Œº‚ÇÅ = Œº‚ÇÇ', 'H‚ÇÅ: Œº‚ÇÅ ‚â† Œº‚ÇÇ', 't = (xÃÑ‚ÇÅ-xÃÑ‚ÇÇ)/SE', 'df = n‚ÇÅ+n‚ÇÇ-2']; break;
                case 'paired_t': statistics = ['H‚ÇÄ: Œº_d = 0', 'H‚ÇÅ: Œº_d ‚â† 0', 't = dÃÑ/(s_d/‚àön)', 'df = n-1']; break;
                case 'chi_square': statistics = ['H‚ÇÄ: No Association', 'H‚ÇÅ: Association', 'œá¬≤ = Œ£(O-E)¬≤/E', 'df = (r-1)(c-1)']; break;
                case 'fisher_exact': statistics = ['H‚ÇÄ: OR = 1', 'H‚ÇÅ: OR ‚â† 1', 'Exact p-value', 'Small samples']; break;
            }
            
            statistics.forEach((statistic, index) => {
                const statisticDiv = document.createElement('div');
                statisticDiv.className = 'test-stat-card';
                statisticDiv.textContent = statistic;
                container.appendChild(statisticDiv);
            });
        }

        function updateEffectDisplay() {
            const effectSize = document.getElementById('effectSizeLevel').value;
            document.getElementById('effectSizeValue').textContent = effectSize;
        }

        // Clinical Data Generation
        function generateClinicalData() {
            const studyType = document.getElementById('clinicalStudy').value;
            const testType = document.getElementById('testType').value;
            const sampleSize = parseInt(document.getElementById('sampleSizeClinical').value);
            const effectSize = parseFloat(document.getElementById('effectSizeLevel').value);
            
            const study = clinicalStudies[studyType];
            
            currentClinicalData = {
                study: study,
                testType: testType,
                sampleSize: sampleSize,
                effectSize: effectSize,
                data: []
            };

            // Generate appropriate clinical data based on test type
            if (testType === 'two_sample_t') {
                // Generate two groups (treatment vs control)
                for (let group = 0; group < 2; group++) {
                    for (let i = 0; i < sampleSize; i++) {
                        const baseValue = studyType === 'drug_trial' ? 140 : 
                                        studyType === 'vaccine_study' ? 5.2 :
                                        studyType === 'surgical_outcome' ? 7.5 : 85;
                        
                        // Add treatment effect for group 1
                        const treatmentEffect = group === 1 ? effectSize * 5 : 0;
                        const value = generateNormal(baseValue - treatmentEffect, 12);
                        
                        currentClinicalData.data.push({
                            id: `${group}-${i}`,
                            group: group === 0 ? 'Control' : 'Treatment',
                            value: Math.max(0, value),
                            age: 45 + Math.random() * 30,
                            sex: Math.random() < 0.52 ? 'Female' : 'Male'
                        });
                    }
                }
            } else if (testType === 'paired_t') {
                // Generate paired data (before/after)
                for (let i = 0; i < sampleSize; i++) {
                    const baseValue = 140;
                    const before = generateNormal(baseValue, 15);
                    const after = generateNormal(baseValue - effectSize * 8, 12);
                    
                    currentClinicalData.data.push({
                        id: i,
                        before: Math.max(90, before),
                        after: Math.max(80, after),
                        difference: before - after,
                        age: 45 + Math.random() * 30,
                        sex: Math.random() < 0.52 ? 'Female' : 'Male'
                    });
                }
            } else if (testType === 'chi_square') {
                // Generate categorical data (2x2 table)
                const successControl = Math.floor(sampleSize * 0.3);
                const successTreatment = Math.floor(sampleSize * (0.3 + effectSize * 0.2));
                
                currentClinicalData.contingencyTable = {
                    control: { success: successControl, failure: sampleSize - successControl },
                    treatment: { success: successTreatment, failure: sampleSize - successTreatment }
                };
            }

            updateClinicalChart();
        }

        function generateNormal(mean, sd) {
            // Box-Muller transform
            const u = 0.5 - Math.random();
            const v = 0.5 - Math.random();
            const z = Math.sqrt(-2 * Math.log(Math.abs(u))) * Math.cos(2 * Math.PI * v);
            return mean + sd * z;
        }

        function updateClinicalChart() {
            if (!currentClinicalData) return;
            
            const ctx = document.getElementById('clinicalChart').getContext('2d');
            
            if (currentClinicalChart) {
                currentClinicalChart.destroy();
            }

            const testType = currentClinicalData.testType;

            if (testType === 'two_sample_t') {
                // Box plot style comparison
                const controlData = currentClinicalData.data.filter(d => d.group === 'Control');
                const treatmentData = currentClinicalData.data.filter(d => d.group === 'Treatment');
                
                const controlMean = controlData.reduce((sum, d) => sum + d.value, 0) / controlData.length;
                const treatmentMean = treatmentData.reduce((sum, d) => sum + d.value, 0) / treatmentData.length;

                currentClinicalChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Control Group', 'Treatment Group'],
                        datasets: [{
                            label: 'Mean Value',
                            data: [controlMean, treatmentMean],
                            backgroundColor: ['rgba(70, 130, 180, 0.7)', 'rgba(34, 139, 34, 0.7)'],
                            borderColor: ['#4682B4', '#228B22'],
                            borderWidth: 3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: `${currentClinicalData.study.title} - Group Comparison`,
                                font: { size: 16, weight: 'bold' }
                            }
                        },
                        scales: {
                            y: { title: { display: true, text: currentClinicalData.study.primary_outcome } }
                        }
                    }
                });
            } else if (testType === 'paired_t') {
                // Before/after comparison
                const beforeData = currentClinicalData.data.map(d => d.before);
                const afterData = currentClinicalData.data.map(d => d.after);
                
                const meanBefore = beforeData.reduce((sum, val) => sum + val, 0) / beforeData.length;
                const meanAfter = afterData.reduce((sum, val) => sum + val, 0) / afterData.length;

                currentClinicalChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Before Treatment', 'After Treatment'],
                        datasets: [{
                            label: 'Mean Value',
                            data: [meanBefore, meanAfter],
                            borderColor: '#228B22',
                            backgroundColor: 'rgba(34, 139, 34, 0.1)',
                            borderWidth: 4,
                            pointRadius: 8,
                            pointBackgroundColor: '#228B22'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: `${currentClinicalData.study.title} - Before/After Analysis`,
                                font: { size: 16, weight: 'bold' }
                            }
                        },
                        scales: {
                            y: { title: { display: true, text: currentClinicalData.study.primary_outcome } }
                        }
                    }
                });
            }
        }

        // Hypothesis Testing
        function performHypothesisTest() {
            if (!currentClinicalData) {
                alert('Please generate clinical study data first');
                return;
            }

            const testType = currentClinicalData.testType;
            let testResults = {};

            if (testType === 'two_sample_t') {
                const controlData = currentClinicalData.data.filter(d => d.group === 'Control');
                const treatmentData = currentClinicalData.data.filter(d => d.group === 'Treatment');
                
                const controlMean = controlData.reduce((sum, d) => sum + d.value, 0) / controlData.length;
                const treatmentMean = treatmentData.reduce((sum, d) => sum + d.value, 0) / treatmentData.length;
                
                // Simplified t-test calculation
                const controlVar = controlData.reduce((sum, d) => sum + Math.pow(d.value - controlMean, 2), 0) / (controlData.length - 1);
                const treatmentVar = treatmentData.reduce((sum, d) => sum + Math.pow(d.value - treatmentMean, 2), 0) / (treatmentData.length - 1);
                
                const pooledSE = Math.sqrt((controlVar / controlData.length) + (treatmentVar / treatmentData.length));
                const tStatistic = (treatmentMean - controlMean) / pooledSE;
                const df = controlData.length + treatmentData.length - 2;
                
                // Approximate p-value (simplified)
                const pValue = 2 * (1 - approximateTCDF(Math.abs(tStatistic), df));
                
                testResults = {
                    testType: 'Two-Sample T-Test',
                    tStatistic: tStatistic,
                    pValue: pValue,
                    df: df,
                    controlMean: controlMean,
                    treatmentMean: treatmentMean,
                    meanDifference: treatmentMean - controlMean,
                    effectSize: (treatmentMean - controlMean) / Math.sqrt((controlVar + treatmentVar) / 2)
                };
            } else if (testType === 'paired_t') {
                const differences = currentClinicalData.data.map(d => d.difference);
                const meanDiff = differences.reduce((sum, d) => sum + d, 0) / differences.length;
                const sdDiff = Math.sqrt(differences.reduce((sum, d) => sum + Math.pow(d - meanDiff, 2), 0) / (differences.length - 1));
                
                const tStatistic = meanDiff / (sdDiff / Math.sqrt(differences.length));
                const df = differences.length - 1;
                const pValue = 2 * (1 - approximateTCDF(Math.abs(tStatistic), df));
                
                testResults = {
                    testType: 'Paired T-Test',
                    tStatistic: tStatistic,
                    pValue: pValue,
                    df: df,
                    meanDifference: meanDiff,
                    effectSize: meanDiff / sdDiff
                };
            }

            displayTestResults(testResults);
        }

        function approximateTCDF(t, df) {
            // Very simple approximation for demonstration
            if (df > 30) return approximateNormalCDF(t);
            return Math.max(0, Math.min(1, 0.5 + t / (2 * Math.sqrt(3 + df))));
        }

        function approximateNormalCDF(x) {
            return 0.5 * (1 + Math.sign(x) * Math.sqrt(1 - Math.exp(-2 * x * x / Math.PI)));
        }

        function displayTestResults(results) {
            const significance = results.pValue < 0.05 ? '‚úÖ Significant' : '‚ùå Not Significant';
            const clinicalRelevance = Math.abs(results.effectSize) > 0.3 ? 'Likely clinically relevant' : 'Clinical relevance unclear';
            
            document.getElementById('testTable').innerHTML = `
                <h4>üß™ ${results.testType} Results</h4>
                <div style="font-family: 'Source Code Pro', monospace; background: var(--pale-green); padding: 35px; border-radius: 18px; margin: 30px 0;">
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 25px; font-weight: 600; border-bottom: 2px solid #ccc; padding-bottom: 18px;">
                        <div>Test Statistic</div>
                        <div>Value</div>
                        <div>Interpretation</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 25px; padding: 18px 0;">
                        <div>t-statistic</div>
                        <div class="p-value-display">${results.tStatistic.toFixed(3)}</div>
                        <div>${Math.abs(results.tStatistic) > 2 ? 'Large effect' : 'Small effect'}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 25px; padding: 18px 0; background: rgba(34, 139, 34, 0.1);">
                        <div>p-value</div>
                        <div class="p-value-display">${results.pValue < 0.001 ? '<0.001' : results.pValue.toFixed(3)}</div>
                        <div>${significance}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 25px; padding: 18px 0;">
                        <div>Effect Size (Cohen's d)</div>
                        <div class="p-value-display">${results.effectSize.toFixed(3)}</div>
                        <div>${Math.abs(results.effectSize) > 0.8 ? 'Large' : Math.abs(results.effectSize) > 0.5 ? 'Medium' : 'Small'}</div>
                    </div>
                    <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 25px; padding: 18px 0; background: rgba(34, 139, 34, 0.1);">
                        <div>Degrees of Freedom</div>
                        <div class="p-value-display">${results.df}</div>
                        <div>-</div>
                    </div>
                </div>
                <div class="clinical-highlight">
                    <p><strong>üß™ Clinical Decision:</strong> 
                    ${results.pValue < 0.05 ? 
                        'Statistical evidence supports rejecting the null hypothesis. ' : 
                        'Insufficient statistical evidence to reject the null hypothesis. '}
                    ${clinicalRelevance}. 
                    Consider effect size magnitude, confidence intervals, and clinical context for final interpretation.
                    </p>
                </div>
            `;

            // Update statistics display  
            document.getElementById('clinicalStats').innerHTML = `
                <div class="stat-card">
                    <div class="stat-value">${results.tStatistic.toFixed(3)}</div>
                    <div class="stat-label">t-statistic</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.pValue < 0.001 ? '<0.001' : results.pValue.toFixed(3)}</div>
                    <div class="stat-label">p-value</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.effectSize.toFixed(3)}</div>
                    <div class="stat-label">Effect Size</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.df}</div>
                    <div class="stat-label">Degrees of Freedom</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${results.pValue < 0.05 ? 'Yes' : 'No'}</div>
                    <div class="stat-label">Significant (Œ±=0.05)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">${(1 - approximateTypeIIError(results.effectSize)) * 100 > 80 ? 'High' : 'Low'}</div>
                    <div class="stat-label">Statistical Power</div>
                </div>
            `;
        }

        function approximateTypeIIError(effectSize) {
            // Simplified power calculation approximation
            return Math.max(0.05, 0.8 * Math.exp(-2 * effectSize * effectSize));
        }

        function interpretResults() {
            if (!currentClinicalData) {
                alert('Please perform hypothesis test first');
                return;
            }

            generatePowerChart();
            displayClinicalInterpretation();
        }

        function generatePowerChart() {
            const ctx = document.getElementById('powerChart').getContext('2d');
            
            if (powerChart) {
                powerChart.destroy();
            }

            // Generate power curve
            const effectSizes = [];
            const powers = [];
            for (let es = 0; es <= 2; es += 0.1) {
                effectSizes.push(es);
                const power = 1 - approximateTypeIIError(es);
                powers.push(power);
            }

            powerChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: effectSizes.map(es => es.toFixed(1)),
                    datasets: [
                        {
                            label: 'Statistical Power',
                            data: powers,
                            borderColor: '#228B22',
                            backgroundColor: 'rgba(34, 139, 34, 0.1)',
                            borderWidth: 3,
                            pointRadius: 0,
                            tension: 0.3
                        },
                        {
                            label: '80% Power Threshold',
                            data: Array(effectSizes.length).fill(0.8),
                            borderColor: '#FF8C00',
                            borderDash: [10, 5],
                            borderWidth: 2,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Statistical Power vs Effect Size',
                            font: { size: 14, weight: 'bold' }
                        }
                    },
                    scales: {
                        x: { title: { display: true, text: 'Effect Size (Cohen\'s d)' } },
                        y: { 
                            title: { display: true, text: 'Statistical Power' },
                            min: 0,
                            max: 1
                        }
                    }
                }
            });
        }

        function displayClinicalInterpretation() {
            const study = currentClinicalData.study;
            
            document.getElementById('interpretationTable').innerHTML = `
                <h4>üß™ Evidence-Based Clinical Interpretation</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 35px; margin: 35px 0;">
                    <div class="stat-card" style="padding: 30px;">
                        <h5>Statistical Evidence</h5>
                        <p><strong>Regulatory Context:</strong> ${study.regulatory_context}</p>
                        <p><strong>Clinical Significance:</strong> ${study.clinical_significance}</p>
                        <div class="error-types">
                            <div class="error-type">Type I Error<br>False Positive</div>
                            <div class="error-type">Type II Error<br>False Negative</div>
                        </div>
                    </div>
                    <div class="stat-card" style="padding: 30px;">
                        <h5>Clinical Translation</h5>
                        <p><strong>Safety Monitoring:</strong> ${study.safety_monitoring}</p>
                        <p><strong>Population Impact:</strong> ${study.population}</p>
                        <p><strong>Implementation:</strong> Results inform clinical practice guidelines and policy decisions</p>
                    </div>
                </div>
                <div class="clinical-highlight">
                    <p><strong>üß™ Evidence-Based Medicine Integration:</strong> 
                    Statistical hypothesis testing provides the foundation for clinical decision-making by quantifying evidence 
                    strength and controlling error rates. <span class="canada-clinical">Canadian health research</span> requires 
                    integration of statistical significance, clinical significance, and practical implementation considerations. 
                    P-values alone are insufficient - effect sizes, confidence intervals, and biological plausibility must guide 
                    clinical interpretation and healthcare policy decisions.
                    </p>
                </div>
            `;
        }

        // Assessment Functions
        function generateNewQuestion() {
            currentQuestion = assessmentQuestions[Math.floor(Math.random() * assessmentQuestions.length)];
            selectedAnswer = null;
            
            document.querySelector('.decision-question').textContent = currentQuestion.question;
            
            const optionsContainer = document.getElementById('assessmentOptions');
            optionsContainer.innerHTML = '';
            
            currentQuestion.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'decision-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectAnswer(index);
                optionsContainer.appendChild(optionDiv);
            });
            
            document.getElementById('assessmentFeedback').innerHTML = '';
        }

        function selectAnswer(answerIndex) {
            selectedAnswer = answerIndex;
            
            document.querySelectorAll('.decision-option').forEach((option, index) => {
                option.classList.toggle('selected', index === answerIndex);
            });
        }

        function checkAnswer() {
            if (selectedAnswer === null) {
                alert('Please select an answer first');
                return;
            }
            
            const isCorrect = selectedAnswer === currentQuestion.correct;
            const feedbackClass = isCorrect ? 'feedback-success' : 'feedback-danger';
            const feedbackTitle = isCorrect ? '‚úì Correct!' : '‚úó Incorrect';
            
            document.getElementById('assessmentFeedback').innerHTML = `
                <div class="${feedbackClass}">
                    <h4>${feedbackTitle}</h4>
                    <p><strong>Explanation:</strong> ${currentQuestion.explanation}</p>
                    <p><strong>Correct Answer:</strong> ${currentQuestion.options[currentQuestion.correct]}</p>
                </div>
            `;
        }

        function showExpertSolution() {
            if (!currentQuestion) {
                generateNewQuestion();
                return;
            }
            
            document.getElementById('assessmentFeedback').innerHTML = `
                <div class="feedback-success">
                    <h4>üß™ Clinical Analysis</h4>
                    <p><strong>Correct Answer:</strong> ${currentQuestion.options[currentQuestion.correct]}</p>
                    <p><strong>Hypothesis Testing Insight:</strong> ${currentQuestion.explanation}</p>
                    <p><strong>Clinical Application:</strong> Hypothesis testing provides the statistical foundation for evidence-based clinical decision-making. Understanding p-values, effect sizes, and error types is essential for interpreting medical research and translating statistical findings into clinical practice.</p>
                </div>
            `;
        }

        // Initialize page
        window.addEventListener('load', function() {
            updateClinicalStudy();
            generateNewQuestion();
        });
    </script>
</body>
</html>
